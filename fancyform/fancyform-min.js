/*!
*  Fancy Form is light form JavaScript library on JQuery
*  One domain licence 5$
*  Any domains licences - 15$
*  One year support with all licences.
*  To prolong support on year - 5$
*/
"use strict";var Fancy={global:this,version:"0.2.0"};Fancy.apply=function(c,b){for(var a in b){c[a]=b[a]}};Fancy.applyIf=function(c,b){for(var a in b){if(c[a]===undefined){c[a]=b[a]}}};Fancy.namespace=function(){var d=0,a=arguments.length;for(;d<a;d++){var f=arguments[d],g=f.split("."),c=1,b=g.length;Fancy.global[g[0]]=Fancy.global[g[0]]||{};var e=Fancy.global[g[0]];for(;c<b;c++){e[g[c]]=e[g[c]]||{};e=e[g[c]]}}};Fancy.ns=Fancy.namespace;Fancy.typeOf=function(b){if(b===null){return"null"}var a=typeof b;if(a==="undefined"||a==="string"||a==="number"||a==="boolean"){return a}var c=Object.prototype.toString,d=c.call(b);switch(d){case"[object Array]":return"array";case"[object Date]":return"date";case"[object Boolean]":return"boolean";case"[object Number]":return"number";case"[object RegExp]":return"regexp"}if(a==="function"){return"function"}if(a==="object"){return"object"}};Fancy.isArray=("isArray" in Array)?Array.isArray:function(a){var b=Object.prototype.toString;return b.call(a)==="[object Array]"};Fancy.isObject=function(a){var b=Object.prototype.toString;return b.call(a)==="[object Object]"};Fancy.isFunction=function(a){var b=Object.prototype.toString;return b.apply(a)==="[object Function]"};Fancy.isString=function(a){return typeof a==="string"};Fancy.isNumber=function(a){return typeof a==="number"&&isFinite(a)};Fancy.isBoolean=function(a){return typeof a==="boolean"};Fancy.each=function(g,f){var c=g,e=Fancy.typeOf(g);switch(e){case"array":var d=0,b=c.length;for(;d<b;d++){f(g[d],d,g)}break;case"object":var h;for(h in g){f(g[h],h,g)}break}};Fancy.trait=function(f,m){if(m.classes){var e=0,c=m.classes,a=c.length;if(Fancy.typeOf(m.classes[0])==="object"){for(;e<a;e++){var n=c[e],g=n._class,b=n.methods,d=0,l=b.length;for(;d<l;d++){var k=b[d];f[k]=g.prototype[k]}}}else{for(;e<a;e++){Fancy.apply(f,c[e]["prototype"])}}}if(m.methods){var e=0,b=m.methods,a=b.length,h;for(;e<a;e++){h=b[e];f[h.name]=h.method}}};Fancy.applyConfig=function(b,a){var c,a=a||{};if(b._isConfigApplied===true){return b}for(c in a){b[c]=a[c]}b._isConfigApplied=true;return b};Fancy.apply(Fancy,{prefix:"fancy-gen",idSeed:0,zIndex:1,id:function(a,b){if(!a){return(b||Fancy.prefix)+(++Fancy.idSeed)}a=a.dom||{};if(!a.id){a.id=(b||Fancy.prefix)+(++Fancy.idSeed)}return a.id}});(function(){var e=navigator.userAgent.toLowerCase(),b=function(f){return f.test(e)},a=function(h,g){var f;return(h&&(f=g.exec(e)))?parseFloat(f[1]):0},c=b(/opera/),d=!c&&b(/msie/);Fancy.apply(Fancy,{isOpera:c,isIE:d});Fancy.getViewSize=function(){var f=[];if(Fancy.isIE){f[0]=document.documentElement.clientWidth;f[1]=document.documentElement.clientHeight}else{f[0]=window.innerHeight;f[1]=window.innerWidth}return f}})();Fancy.Collection=function(a){var d=this;d.items=[];d.keys=[];d.map={};d.indexMap={};d.length=0;if(a){if(a.length>0){var c=0,b=a.length;for(;c<b;c++){d.add(c,a[c])}}else{for(var e in a){d.add(e,a[e])}}}};Fancy.Collection.prototype={add:function(a,c){var b=this;b.items.push(c);b.keys.push(a);b.map[a]=c;b.indexMap[a]=b.length;b.length++},remove:function(b){var c=this,a=c.indexMap[b];c.items.splice(a,1);c.keys.splice(a,1);delete c.indexMap[a];delete c.map[b];c.length--},removeAll:function(){var a=this;a.items=[];a.keys=[];a.indexMap={};a.map={};a.length=0},get:function(a){var b=this;return b.map[a]},each:function(c){var d=this,b=0,a=d.length;for(;b<a;b++){c(d.keys[b],d.items[b],b,d.length)}}};Fancy.Template=function(a){var b=this;b.tpl=a.join("");b.compile()};Fancy.Template.prototype={re:/\{([\w\-]+)\}/g,getHTML:function(a){var c=this,b;return c.compiled(a)},compile:function(){var me=this,sep="+";function fn(m,name){name="values['"+name+"']";return"'+("+name+" === undefined ? '' : "+name+")+'"}eval("me.compiled = function(values){ return '"+me.tpl.replace(me.re,fn)+"';};");return me}};Fancy.key={BACKSPACE:8,TAB:9,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_PLUS:107,NUM_MINUS:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90};Fancy.Key={isNum:function(b){var a=Fancy.key;switch(b){case a.ZERO:case a.ONE:case a.TWO:case a.THREE:case a.FOUR:case a.FIVE:case a.SIX:case a.SEVEN:case a.EIGHT:case a.NINE:case a.NUM_ZERO:case a.NUM_ONE:case a.NUM_TWO:case a.NUM_THREE:case a.NUM_FOUR:case a.NUM_FIVE:case a.NUM_SIX:case a.NUM_SEVEN:case a.NUM_EIGHT:case a.NUM_NINE:return true;default:return false}},isNumControl:function(d,b){var a=Fancy.key;if(Fancy.Key.isNum(d)){return true}if(b.shiftKey&&d===187){return true}switch(d){case a.NUM_PLUS:case 189:case a.NUM_MINUS:case a.BACKSPACE:case a.DELETE:case a.TAB:case a.ENTER:case a.RETURN:case a.SHIFT:case a.CTRL:case a.ALT:case a.ESC:case a.END:case a.HOME:case a.LEFT:case a.UP:case a.RIGHT:case a.DOWN:case a.INSERT:case a.DELETE:case a.DELETE:return true;break;default:return false}}};(function(){var c={},b={};var d=function(f,e){for(var g in e.prototype){if(f.prototype[g]===undefined){f.prototype[g]=e.prototype[g]}}};var a=function(){};a.prototype={items:new Fancy.Collection(),add:function(g,j){var k=g.split("."),f=1,e=k.length-1;Fancy.ns(g);var h=Fancy.global[k[0]];for(;f<e;f++){h=h[k[f]]}if(k.length>1){h[k[k.length-1]]=j}else{Fancy.global[k[0]]=j}this.items.add(g,j)},get:function(e){return this.items.get(e)}};Fancy.ClassManager=new a();Fancy.Class=function(g,f){var f=f||{},j=[];if(Fancy.isArray(g)){j=g;g=j[0]}if(f.constructor===Object){if(f.extend===undefined){f.constructor=function(){}}else{f.constructor=function(){this.Super("constructor",arguments)}}}if(f.extend===undefined){c[g]=f.constructor}else{c[g]=f.constructor;var e;switch(typeof f.extend){case"string":e=Fancy.ClassManager.get(f.extend);c[g].prototype.$Super=Fancy.ClassManager.get(f.extend);break;case"function":e=f.extend;c[g].prototype.$Super=f.extend;break}delete f.extend;c[g].prototype.Super=function(m,k){var l=this;if(l.$Iam){l.$Iam=Fancy.ClassManager.get(l.$Iam.prototype.$Super.prototype.$name)}else{l.$Iam=Fancy.ClassManager.get(l.$Super.prototype.$name)}switch(m){case"const":case"constructor":l.$Iam.apply(l,k);break;default:l.$Iam.prototype[m].apply(l,k)}delete l.$Iam};d(c[g],e)}c[g].prototype.$name=g;if(f.traits){Fancy.trait(c[g].prototype,f.traits);delete c[g].prototype.traits}if(f.plugins!==undefined){if(c[g].prototype.$plugins===undefined){c[g].prototype.$plugins=[]}c[g].prototype.$plugins=c[g].prototype.$plugins.concat(f.plugins);delete c[g].prototype.plugins}for(var i in f){c[g].prototype[i]=f[i]}var h=c[g];if(f.singleton===true){delete c[g];h=new h(f);c[g]=h}if(j.length>1){Fancy.each(j,function(k){Fancy.ClassManager.add(k,h)})}else{Fancy.ClassManager.add(g,h)}if(f.type){b[f.type]=h;Fancy.addWidgetType(f.type,h)}else{if(f.ptype){b[f.type]=h;Fancy.addPluginByType(f.ptype,h)}}};Fancy.getClassByType=function(e){return b[e]}})();Fancy.TraitClass=function(){};Fancy.TraitClass.prototype={initId:function(){var a=this,b=a.prefix||Fancy.prefix;a.id=a.id||Fancy.id(null,b);Fancy.addWidget(a.id,a)},initPlugins:function(){var j=this,d=j,e,k,f;if(j.plugins!==undefined){j.$plugins=j.plugins;delete j.plugins}if(j.$plugins===undefined){return}var c=0,b=j.$plugins,a=b.length,h;for(;c<a;c++){f=b[c];f.widget=d;var g=f.type||f.ptype;e=Fancy.getPluginByType(g);k=new e(f);h=f.inWidgetName||k.inWidgetName;if(h!==undefined){d[h]=k}}}};Fancy.Class("Fancy.Data",{constructor:function(d){var c=this;c.map={};if(d){var a=0,b=d.length,e=c.map;for(;a<b;a++){e[a]=d[a]}}c.length=0},add:function(a,c){var b=this;b.map[a]=c;b.length++},get:function(a){return this.map[a]}});Fancy.Class("Fancy.PluginManager",{singleton:true,constructor:function(){var a=this;a.ptypes=new Fancy.Data()},addPlugin:function(b,a){this.ptypes.add(b,a)},getPlugin:function(a){return this.ptypes.get(a)}});Fancy.addPluginByType=function(b,a){Fancy.PluginManager.addPlugin(b,a)};Fancy.getPluginByType=function(a){return Fancy.PluginManager.getPlugin(a)};Fancy.Class("Fancy.WidgetManager",{singleton:true,constructor:function(){var a=this;a.wtypes=new Fancy.Data();a.widgets=new Fancy.Data()},addWidgetType:function(a,b){b.prototype.wtype=a;this.wtypes.add(a,b)},getWidgetClassByType:function(a){return this.wtypes.get(a)},addWidget:function(b,a){this.widgets.add(b,a)},getWidget:function(a){return this.widgets.get(a)}});Fancy.addWidgetType=function(a,b){Fancy.WidgetManager.addWidgetType(a,b)};Fancy.getWidgetClassByType=function(a){return Fancy.WidgetManager.getWidgetClassByType(a)};Fancy.addWidget=function(b,a){Fancy.WidgetManager.addWidget(b,a)};Fancy.getWidget=function(a){return Fancy.WidgetManager.getWidget(a)};(function(){var b=0,a={};Fancy.Class(["Fancy.Event","Fancy.Observable"],{traits:{classes:[Fancy.TraitClass]},constructor:function(e){var j=this,e=e||{};Fancy.applyConfig(j,e);j.$events={};if(j.listeners||j.events){var k=j.listeners||j.events,g=0,d=k.length;for(;g<d;g++){var n=k[g],h=null,m=null,l=null,f=[];for(var c in n){if(c==="scope"){l=n[c]}else{if(c==="params"){f=n[c]}else{h=c;m=n[c]}}}if(h===null||Fancy.isFunction(m)===false){throw new Error("Event was not set")}if(Fancy.isArray(f)===false){throw new Error("params must be array")}j.addEvent(h);j.on(h,m,l,f)}}},on:function(c,e,d,f){if(this.$events[c]===undefined){console.log(arguments);throw new Error("Event name is not set: "+c)}e.$mtFnSeed=b;a[b]=e;b++;this.$events[c].push({fn:e,scope:d,params:f||[]})},un:function(d,g){var h=this,j=h.$events[d];if(!j){return false}var f=0,c=j.length;for(;f<c;f++){var e=j[f];if(e.fn.$mtFnSeed===g.$mtFnSeed){e.toRemove=true;return true}}return false},once:function(c,e,d){var g=this,f=function(){e.apply(this,arguments);g.un(c,f)};g.on(c,f,d)},unAll:function(){this.$events={}},unAllByType:function(c){this.$events[c]=[]},fire:function(e){var j=this,k=j.$events[e];if(!k){return false}var h=1,d=arguments.length,g=[j];for(;h<d;h++){g.push(arguments[h])}var h=0,d=k.length;for(;h<d;h++){var f=k[h],c=[];if(f.toRemove===true){k.splice(h,1);h--;d=k.length;continue}c=c.concat(g);if(f.params){c=c.concat(f.params)}f.fn.apply(f.scope||j,c)}},addEvent:function(c){var d=this;d.$events[c]=d.$events[c]||[]},addEvents:function(e){var g=this;if(arguments.length>1){var d=[],f=0,c=arguments.length;for(;f<c;f++){d[f]=arguments[f]}e=d}if(Fancy.typeOf(e)==="string"){g.$events[e]=g.$events[e]||[]}else{if(Fancy.typeOf(e)==="array"){var f=0,c=e.length;for(;f<c;f++){g.$events[e[f]]=g.$events[e[f]]||[]}}}},has:function(c){var d=this.$events[c];if(!d){return false}return d.length!==0}})})();Fancy.$=$;Fancy.get=function(b){var a=Fancy.typeOf(b);switch(a){case"string":return new Fancy.Element(Fancy.$("#"+b)[0]);break;default:return new Fancy.Element(b);break}};Fancy.Element=function(b){var a=this;a.dom=b;a.$dom=Fancy.$(b)};Fancy.Element.prototype={on:function(a,c,b){var d=this;if(b){d.$dom.on(a,$.proxy(c,b))}else{d.$dom.on(a,c)}},un:function(){},getByClass:function(a){var b=this;return b.$dom.find("."+a)[0]},getByTag:function(a){var b=this;return Fancy.get(b.$dom.find(a)[0])},addClass:function(a){var b=this;b.$dom.addClass(a)},removeClass:function(a){var b=this;b.$dom.removeClass(a)},hasClass:function(a){var b=this;return b.$dom.hasClass(a)},toggleClass:function(a){var b=this;b.$dom.toggleClass(a)},select:function(a){var b=this;return b.$dom.find(a)},attr:function(b,a){if(a===undefined){return this.$dom.attr(b)}return this.$dom.attr(b,a)},css:function(b,a){if(a===undefined){return this.$dom.css(b)}return this.$dom.css(b,a)},append:function(a){return this.$dom.append(a)[0]},height:function(){return this.$dom.height()},width:function(){return this.$dom.width()},parent:function(a){return Fancy.get(this.$dom.parent(a)[0])},update:function(a){this.dom.innerHTML=a}};Fancy.select=function(a){return Fancy.get(document.body).select(a)};Fancy.onReady=function(a){$(document).ready(a)};Fancy.Ajax=function(b){var a={};if(b.url){a.url=b.url}if(b.success){a.success=b.success}if(b.error){a.error=b.error}if(b.method){a.type=b.method}if(b.params){a.data=b.params}$.ajax(a)};Fancy.Class("Fancy.Widget",{extend:Fancy.Event,constructor:function(a){var b=this;Fancy.applyConfig(b,a);b.Super("const",arguments);b.init()},init:function(){var a=this;a.initId();a.addEvents("beforerender","afterrender","render","show","hide","destroy");a.initPlugins()},renderItems:function(f){var e=this,c=0,b=e.items.length;for(;c<b;c++){var d=e.items[c],a=Fancy.getClassByType(d.type);d.renderTo=f;e.items[c]=new a(d)}}});Fancy.Class("Fancy.Button",{extend:Fancy.Widget,constructor:function(){var a=this;a.Super("const",arguments)},init:function(){var a=this;a.addEvents("click","mousedown","mouseup","mouseover","mouseout");a.Super("init",arguments);a.style=a.style||{};a.render();a.setOns()},setOns:function(){var b=this,a=b.el;a.on("click",b.onClick,b);a.on("mousedown",b.onMouseDown,b);a.on("mouseup",b.onMouseUp,b);a.on("mouseover",b.onMouseOver,b);a.on("mouseout",b.onMouseOut,b)},cls:"fancy fancy-button",text:"",height:28,paddingTextWidth:5,render:function(){var c=this,d=Fancy.get(c.renderTo||document.body).dom,b=document.createElement("div"),a=0;c.fire("beforerender");if(c.width){a=c.width}else{a=c.paddingTextWidth*2;a+=c.text.length*7}b.className=c.cls;b.style.width=a+"px";b.style.height=c.height+"px";b.innerHTML=['<div class="fancy-button-text">',c.text,"</div>"].join("");c.el=Fancy.get(d.appendChild(b));Fancy.each(c.style,function(e,f){c.el.css(f,e)});c.fire("afterrender");c.fire("render")},onClick:function(){var a=this;a.fire("click");if(a.handler){a.handler(a)}},onMouseDown:function(){var a=this;a.fire("mousedown")},onMouseUp:function(){var a=this;a.fire("mouseup")},onMouseOver:function(){var a=this;a.fire("mouseover")},onMouseOut:function(){var a=this;a.fire("mouseout")},setText:function(b){var a=this;Fancy.get(a.el.select(".fancy-button-text")[0]).update(b)}});Fancy.Class("Fancy.Panel",{extend:Fancy.Widget,constructor:function(){var b=this,a=a||{};Fancy.apply(b,a);b.Super("constructor",arguments)},init:function(){var a=this;a.Super("init",arguments);a.render()},cls:"fancy fancy-panel",value:"",width:300,height:200,titleHeight:30,title:undefined,frame:false,shadow:true,render:function(){var e=this,h=Fancy.get(e.renderTo||document.body),d=document.createElement("div"),b=e.cls,a=e.title===undefined?false:true,c=0,g=e.titleHeight,f=e.buttonBarHeight;if(e.theme){b+=" fancy-theme-"+e.theme}if(e.shadow){b+=" fancy-panel-shadow"}d.className=b;d.style.width=e.width+"px";d.style.height=(e.height-c)+"px";if(e.style){Fancy.apply(d.style,e.style)}if(a&&e.buttons){}if(!a){}else{if(!e.buttons){}}d.innerHTML=['<div style="'+(a?"":"display: none;")+"height:"+g+'px;" class="fancy-panel-header">','<div class="fancy-panel-header-text">',e.title,"</div>","</div>",'<div class="fancy-panel-body ">',"</div>"].join("");e.el=h.dom.appendChild(d);e.el=Fancy.get(e.el);if(e.modal){if(Fancy.select("fancy-modal").length===0){Fancy.get(document.body).append('<div class="fancy-modal" style="position: fixed;display: none; width: 100%;height: 100%;top: 0px; left: 0px;background: #000;opacity: 0.2;"></div>')}}}});Fancy.Class("Fancy.Form",{extend:Fancy.Widget,type:"form",theme:"default",constructor:function(c){var i=this;c=i.prepareConfig(c);var e=c.titleHeight||30,d=c.titlePaddingTop||7,h=c.titleBorders||[1,1,1,1],f=c.buttonsBarHeight||37,g=c.buttonBarBorders||[1,0,0,0],j=c.formBorders||[1,1,1,1],a={};if(c.window===true){a.display="none";a.position="absolute"}i.titleHeight=e;i.titleBorders=h;i.buttonBarHeight=f;i.buttonBarBorders=g;i.formBorders=j;var b=new Fancy.Panel({renderTo:c.renderTo,title:c.title,titleBorders:h,width:c.width,height:c.height,buttons:c.buttons,buttonBarHeight:f,titleHeight:e,style:a,modal:c.modal,theme:c.theme||""});c.renderTo=b.el.getByClass("fancy-panel-body");c.isPanel=true;i.Super("const",arguments)},prepareConfig:function(c){if(!c.id&&!c.renderTo){c.window=true;c.modal=true}if(c.theme==="light-blue"){if(Fancy.isObject(c.title)){c.title.height=40}else{if(Fancy.isString(c.title)){c.title={text:c.title,height:40}}}c.borders=[1,2,2,2];if(c.buttons){if(Fancy.isObject(c.buttons)){c.buttons.height=44}else{if(Fancy.isArray(c.buttons)){c.buttons={height:44,items:c.buttons}}}}}if(c.borders){c.formBorders=c.borders}if(Fancy.isObject(c.title)){var b=c.title;if(b.text){c.title=b.text}if(b.height){c.titleHeight=b.height}if(b.borders){c.titleBorders=b.borders}}if(Fancy.isObject(c.buttons)){var a=c.buttons;if(a.items){c.buttons=a.items}if(a.height){c.buttonsBarHeight=a.height}if(a.borders){c.buttonsBarBorders=a.borders}}return c},init:function(){var a=this;a.Super("init",arguments);if(a.defaults){for(var b in a.defaults){Fancy.each(a.items,function(c){if(c[b]===undefined){c[b]=a.defaults[b]}})}}Fancy.each(a.items,function(c){c.theme=a.theme||"";if(c.labelWidth===undefined){c.labelWidth=a.labelWidth}if(c.inputWidth===undefined){c.inputWidth=a.inputWidth}if(c.type==="pass"||c.type==="password"){c.type="string";c.isPassword=true}});a.addEvents();a.tpl=new Fancy.Template(a.tpl);a.render();a.ons()},cls:"fancy fancy-form",value:"",width:200,emptyText:"",labelWidth:65,inputWidth:100,tpl:['<div class="fancy-form-body">',"</div>",'<div class="fancy-panel-bbar" style="{isBBar}{buttonBarHeight}">',"</div>"],render:function(){var e=this,h=e.renderTo||document.body,c=document.createElement("div"),a=e.cls,d="display: none;",f=e.buttonBarHeight,g=e.titleHeight;if(e.buttons){d=""}e.fire("beforerender");e.height-=e.formBorders[0];e.height-=e.formBorders[2];if(e.isPanel===true){Fancy.get(c).css("border-width","0px");if(e.title){e.height-=g;e.height-=e.titleBorders[0];e.height-=e.titleBorders[2]}if(e.buttons){}}c.className=e.cls;c.style.width=e.width+"px";c.style.height=e.height+"px";c.innerHTML=e.tpl.getHTML({isBBar:d,buttonBarHeight:"height:"+f+"px"});e.el=Fancy.get(h.appendChild(c));e.renderItems(e.el.getByClass("fancy-form-body"));if(e.buttons){var b=e.buttons.length;while(b--){e.buttons[b].renderTo=e.el.getByClass("fancy-panel-bbar");e.buttons[b]=new Fancy.Button(e.buttons[b])}}e.fire("afterrender");e.fire("render")},renderItems:function(h,f,c){var k=this,f=f||k.items,d=0,a=f.length,e=[],c=c||0;for(;d<a;d++){var n=f[d],m;n.theme=k.theme;switch(n.type){case"pass":case"password":m=Fancy.form.field.String;n.type="string";n.isPassword=true;break;case"hidden":m=Fancy.form.field.String;n.hidden=true;break;case"line":case"row":m=Fancy.form.field.Line;if(n.defaults){var b=0,l=n.items.length;for(;b<l;b++){Fancy.applyIf(n.items[b],n.defaults)}}break;case"set":case"fieldset":m=Fancy.form.field.Set;n.form=k;if(n.defaults){var b=0,l=n.items.length;for(;b<l;b++){Fancy.applyIf(n.items[b],n.defaults)}}break;case"string":m=Fancy.form.field.String;break;case"number":m=Fancy.form.field.Number;break;case"textarea":m=Fancy.form.field.TextArea;break;case"checkbox":m=Fancy.form.field.CheckBox;break;case"combo":m=Fancy.form.field.Combo;break;case"html":m=Fancy.form.field.HTML;break;case"radio":m=Fancy.form.field.Radio;break;case"recaptcha":m=Fancy.form.field.ReCaptcha;break;default:throw new Error("type "+n.type+" is not set")}n.renderTo=n.renderTo||h;var g=new m(n);switch(n.type){case"line":case"row":case"set":case"fieldset":e.push(g);break;default:k.items[c]=g;c++}}var d=0,a=e.length;for(;d<a;d++){var n=e[d];k.renderItems(n.el.select(".fancy-field-text")[0],n.items,c);c+=n.items.length}},ons:function(){var a=this;Fancy.each(a.items,function(b){switch(b.type){case"line":case"row":break;case"set":case"fieldset":b.on("collapsed",function(){console.log("collapsed")});b.on("expanded",function(){console.log("expanded")});break;default:b.on("key",function(){a.fire("key",b.name,b.get())})}})},get:function(b){var c=this;if(b){var d;Fancy.each(c.items,function(e){if(e.type==="html"){return}if(e.name===b){d=e.get();return true}});return d}else{var a={};Fancy.each(c.items,function(e){if(e.type==="html"){return}a[e.name]=e.get()});return a}},clear:function(a){var b=this;Fancy.each(b.items,function(d){if(d.type==="html"||d.type==="recaptcha"){return}if(a!==false){d.clear()}var c=d.el;if(c.hasClass("fancy-field-not-valid")){c.removeClass("fancy-field-not-valid");c.css("height",(parseInt(c.css("height"))-6)+"px")}if(c.hasClass("fancy-field-blank-err")){c.removeClass("fancy-field-blank-err");c.css("height",(parseInt(c.css("height"))-6)+"px")}})},submit:function(d){var b=this,d=d||{},c=b.params||{};b.params=b.params||{};Fancy.apply(b,d);if(d.params){Fancy.apply(c,b.params);b.params=c}b.clear(false);if(b.valid()===false){return}var a=b.get();Fancy.applyIf(b.params,a);if(b.params.recaptcha==="wait"){b.submit(d);return}if(b.params.recaptcha===""){return}b.params["g-recaptcha-response"]=b.params.recaptcha;delete b.params.recaptcha;Fancy.Ajax(b)},valid:function(){var b=this,a=true;Fancy.each(b.items,function(c){if(a===true){a=c.onBlur()}else{c.onBlur()}});return a},show:function(){var d=this;if(d.window!==true){return}var h=Fancy.getViewSize(),a=d.el.height(),c=d.el.width(),f=[],e=document.body.scrollTop,g=document.body.scrollLeft;f[0]=(h[1]-c)/2;f[1]=(h[0]-a)/2;if(f[0]<10){f[0]=10}if(f[1]<10){f[1]=10}var b=d.el.parent().parent();b.css({left:(f[0]+g)+"px",top:(f[1]+e)+"px",display:"","z-index":Fancy.zIndex});Fancy.select(".fancy-modal").css("display","")},hide:function(){var b=this,a=b.el.parent().parent();a.css({display:"none"});Fancy.select(".fancy-modal").css("display","none")},setHeight:function(a){var b=this;b.el.css("height",a+"px")},getHeight:function(){var a=this;return parseInt(a.el.css("height"))}});var FancyForm=function(a){if(!a.id){a.window=true;a.modal=true}return Fancy.$.fn.FancyForm(a)};FancyForm.get=function(a){console.log(MT.get(a))};FancyForm.vtype=function(a){Fancy.form.field.Trait.prototype.vtypes[a.type]=a};Fancy.$.fn.FancyForm=function(a){a.renderTo=$(this.selector)[0];return new Fancy.Form(a)};Fancy.ns("Fancy.form.field");Fancy.form.field.Trait=function(){};Fancy.form.field.Trait.prototype={vtypes:{},ons:function(){var b=this,a=b.el.getByTag("input");b.input=a;a.on("blur",b.onBlur,b);a.on("focus",b.onFocus,b);a.on("input",b.onInput,b);a.on("keydown",b.onKeyDown,b);b.on("key",b.onKey,b)},prepareValid:function(){var c=this,b=c.valid,d=c.vtypes;if(b&&b.type){var a=d[b.type];if(!a){throw new Error("not right validation type - "+b.type)}Fancy.applyIf(c.valid,a)}},render:function(){var h=this,g=h.renderTo||document.body,b=document.createElement("div");h.prepareValid();h.fire("beforerender");b.className=h.cls;var f="",d="",c="";if(h.itemsHTML){c=h.itemsHTML}if(h.labelWidth){f="width:"+h.labelWidth+"px;"}if(h.inputWidth){d="width:"+h.inputWidth+"px;"}var i=h.label;if(h.label===""){i="&nbsp;"}else{if(h.label===undefined){i="&nbsp;"}else{if(h.labelAlign!=="right"){i+=":"}}}var a="",e=h.labelWidth||0;e+=11;if(h.labelAlign==="top"){e=2}if(h.label===false){a="display:none;"}if(h.type==="recaptcha"){b.innerHTML=h.tpl.getHTML({key:h.key})}else{b.innerHTML=h.tpl.getHTML({labelWidth:f,label:i,labelDisplay:a,emptyText:h.emptyText,inputWidth:d,value:h.value,height:h.height,itemsHTML:c,errorTextStyle:"margin-left: "+(e)+"px;"})}h.el=g.appendChild(b);h.el=Fancy.get(h.el);if(h.labelAlign==="top"){h.el.addClass("fancy-field-label-align-top")}else{if(h.labelAlign==="right"){h.el.addClass("fancy-field-label-align-right");$(b).find(".fancy-field-label").insertAfter($(b).find(".fancy-field-text"))}else{if(h.type!=="radio"){h.el.select(".fancy-field-text").css("float","none")}}}h.acceptedValue=h.value;h.fire("afterrender");h.fire("render");if(h.type!=="recaptcha"){setTimeout(function(){if(h.input){if(h.input.dom.value.length===0){if(h.prevColor===undefined){h.prevColor=h.input.css("color")}h.input.css("color","grey")}}})}},onKeyDown:function(f){var b=this,d=f.keyCode,a=Fancy.key;if(b.type==="number"){if(Fancy.Key.isNumControl(d,f)===false){f.preventDefault();f.stopPropagation();return}}switch(d){case a.ENTER:if(b.type!=="textarea"){b.fire("enter",b.getValue());f.preventDefault();f.stopPropagation()}break;case a.UP:if(b.type==="number"){var c=+b.get()+b.step;if(isNaN(c)){c=b.min||0}if(b.max!==undefined&&c>b.max){c=b.max}else{if(c<b.min){c=b.min}}b.set(c)}b.fire("up",b.getValue());f.preventDefault();f.stopPropagation();break;case a.DOWN:if(b.type==="number"){var c=+b.get()-b.step;if(isNaN(c)){c=b.min||0}if(b.min!==undefined&&c<b.min){c=b.min}else{if(c>b.max){c=b.max}}b.set(c)}b.fire("up",b.getValue());f.preventDefault();f.stopPropagation();break;case a.LEFT:break;case a.RIGHT:f.stopPropagation();break;default:setTimeout(function(){if(b.input){if(b.input.dom.value.length===0){if(b.prevColor===undefined){b.prevColor=b.input.css("color")}b.input.css("color","grey")}else{if(b.prevColor){b.input.css("color",b.prevColor)}else{b.input.css("color"," ")}}}})}setTimeout(function(){b.fire("key",b.getValue())})},onKey:function(){var b=this,a=b.valid;if(a&&a.type){b.validate()}},onBlur:function(){var c=this,a=c.el,b=c.valid,d=true;if(b){if(b.blank===false&&((c.type==="combo"&&c.get()===0)||c.get().length===0)){a.addClass("fancy-field-blank-err");if(a.hasClass("fancy-field-not-valid")){a.removeClass("fancy-field-not-valid");a.css("height",(parseInt(a.css("height"))-6)+"px")}if(b.blankText){a.css("height",(parseInt(a.css("height"))+6)+"px");a.select(".fancy-field-error")[0].innerHTML=b.blankText}}else{if(b.type){c.validate()}else{a.removeClass("fancy-field-blank-err");a.removeClass("fancy-field-not-valid")}}}if(a.hasClass("fancy-field-blank-err")){d=false}if(a.hasClass("fancy-field-not-valid")){d=false}c.fire("blur");return d},onFocus:function(){var b=this,a=b.el;if(a.hasClass("fancy-field-blank-err")){b.el.removeClass("fancy-field-blank-err");if(b.valid.blankText){a.css("height",(parseInt(a.css("height"))-6)+"px")}}b.fire("focus")},onInput:function(f,d){var b=this,a=b.input,c=b.getValue();b.acceptedValue=b.get();b.fire("input",c);b.fire("change",c)},get:function(){var a=this;return a.input.dom.value},getValue:function(){return this.get()},set:function(c,a){var b=this;b.input.dom.value=c;if(a!==false){b.onInput()}},setValue:function(b,a){this.set(b,a)},clear:function(){this.set("")},validate:function(){var f=this,d=f.el,e=f.valid,h=f.vtypes,c=h[e.type];if(!c){throw new Error("not right validation type - "+e.type)}var g=f.get(),a=d.hasClass("fancy-field-not-valid");if(c.fn){if(!c.fn(g)){d.addClass("fancy-field-not-valid")}else{d.removeClass("fancy-field-not-valid")}}else{if(c.re){if(!c.re.test(g)){d.addClass("fancy-field-not-valid")}else{d.removeClass("fancy-field-not-valid")}}}var b=d.hasClass("fancy-field-not-valid");if(a===false&&b===true){if(e.text){d.css("height",(parseInt(d.css("height"))+6)+"px")}}if(a===true&&b===false){if(e.text){d.css("height",(parseInt(d.css("height"))-6)+"px")}}if(b){d.select(".fancy-field-error")[0].innerHTML=e.text}return b}};FancyForm.vtype({type:"email",re:/^(")?(?:[^\."])(?:(?:[\.])?(?:[\w\-!#$%&'*+\/=?\^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,text:"Incorect email"});Fancy.Class(["Fancy.form.field.String","Fancy.StringField"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.string",constructor:function(a){var b=this,a=a||{};Fancy.apply(b,a);b.Super("const",arguments)},init:function(){var a=this;a.addEvents("focus","blur","input","enter","up","down","change","key");a.Super("init",arguments);a.tpl=new Fancy.Template(a.tpl);a.render();a.ons();if(a.isPassword){a.input.attr({type:"password"})}if(a.hidden){a.el.css("display","none")}if(a.style){a.el.css(a.style)}},cls:"fancy fancy-field",value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">','<input placeholder="{emptyText}" class="fancy-field-text-input" style="{inputWidth}" value="{value}">','<div class="fancy-field-error" style="{errorTextStyle}"></div>',"</div>",'<div class="fancy-clearfix"></div>']});Fancy.Class(["Fancy.form.field.Number","Fancy.NumberField"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.number",allowBlank:true,constructor:function(a){var b=this,a=a||{};Fancy.apply(b,a);b.Super("const",arguments)},init:function(){var a=this;a.addEvents("focus","blur","input","enter","up","down","change","key");a.Super("init",arguments);a.tpl=new Fancy.Template(a.tpl);a.render();a.ons()},cls:"fancy fancy-field",value:"",width:100,emptyText:"",step:1,max:100000000000000000000,min:-100000000000000000000,tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">','<input placeholder="{emptyText}" class="fancy-field-text-input" style="{inputWidth}" value="{value}">','<div class="fancy-field-error" style="{errorTextStyle}"></div>',"</div>",'<div class="fancy-clearfix"></div>'],onInput:function(g,f){var b=this,a=b.input,c=b.get(),d=b.checkMinMax(c);if(b.isNumber(c)===false||c==="-"||c==="+"){d=false}if(d===false){}if(c===""&&b.allowBlank){d=true}else{if(c===""&&b.allowBlank===false){d=false;b.el.addClass("fancy-field-not-valid")}}if(c===""||c==="-"){}else{}if(d){b.acceptedValue=b.get();b.el.removeClass("fancy-field-not-valid")}b.fire("input",c);b.fire("change",c)},isNumber:function(b){var a=this;if(b===""||b==="-"){return true}return Fancy.isNumber(+b)},checkMinMax:function(b){if(b===""||b==="-"){return true}var a=this,b=+b;return b>=a.min&&b<=a.max}});Fancy.Class(["Fancy.form.field.TextArea","Fancy.TextArea"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.textarea",constructor:function(){var a=this;a.Super("const",arguments)},init:function(){var a=this;a.addEvents("focus","blur","input","up","down","change","key");a.Super("init",arguments);a.tpl=new Fancy.Template(a.tpl);a.render();a.ons()},cls:"fancy fancy-field fancy-textarea",value:"",width:250,height:100,labelWidth:60,inputWidth:180,emptyText:"",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-textarea-text">','<textarea autocomplete="off" placeholder="{emptyText}" type="text" class="fancy-textarea-text-input" style="{inputWidth}height:{height}px;" value="{value}"></textarea>',"</div>",'<div class="fancy-clearfix"></div>'],ons:function(){var b=this,a=b.el.getByTag("textarea");b.input=a;a.on("blur",b.onBlur,b);a.on("focus",b.onFocus,b);a.on("input",b.onInput,b);a.on("keydown",b.onKeyDown,b)}});Fancy.Class(["Fancy.form.field.CheckBox","Fancy.CheckBox"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.checkbox",constructor:function(){var a=this;a.Super("const",arguments)},init:function(){var a=this;a.addEvents("focus","blur","input","up","down","change","key");a.Super("init",arguments);a.tpl=new Fancy.Template(a.tpl);a.render({labelWidth:a.labelWidth,labelDispay:a.labelText?"":"none",label:a.label});a.acceptedValue=a.value;a.set(a.value);a.ons()},labelText:"",labelWidth:60,value:false,checkedCls:"fancy-checkbox-on",cls:"fancy fancy-field fancy-field-checkbox",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">','<div class="fancy-field-checkbox-input" style=""></div>',"</div>",'<div class="fancy-clearfix"></div>'],ons:function(){var b=this,a=b.el;a.on("click",b.onClick,b);a.on("mousedown",b.onMouseDown,b)},onClick:function(){var b=this,a=b.el,c=b.checkedCls;a.toggleClass(c);b.value=a.hasClass(c);b.fire("change",b.value)},onMouseDown:function(d,c){var b=this,a=b.el;d.preventDefault()},set:function(d,b){var c=this,a=c.el,e=c.checkedCls;if(d===true||d===1){a.addClass(e);d=true}else{if(d===false||d===0){a.removeClass(e);d=false}else{throw new Error("not right value for checkbox "+d)}}c.value=d;if(b!==false){c.fire("change",c.value)}},setValue:function(b,a){this.set(b,a)},getValue:function(){var a=this;return a.value},get:function(){return this.getValue()},clear:function(){this.set(false)}});(function(){var a={};var b=function(d){for(var c in a){if(c!==d){a[c].hideList()}}};Fancy.Class(["Fancy.form.field.Combo","Fancy.Combo"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.combo",constructor:function(){var c=this;c.Super("const",arguments)},init:function(){var c=this;c.addEvents("focus","blur","input","up","down","change","key");c.Super("init",arguments);c.tpl=new Fancy.Template(c.tpl);c.render();c.ons();a[c.id]=c;if(c.hidden){c.el.css("display","none")}if(c.style){c.el.css(c.style)}},cls:"fancy fancy-field fancy-combo",width:250,height:100,labelWidth:60,inputWidth:180,listRowHeight:25,emptyText:"",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-combo-text">','<table cellspacing="0" cellpadding="0">',"<tbody>","<tr>",'<td class="">','<input value="{value}" type="text" class="fancy-combo-input" readonly="true" style="{inputWidth} ">',"</td>",'<td class="fancy-combo-dropdown-button" style="width: 20px; ">&nbsp;</td>',"</tr>","</tbody>","</table>",'<div class="fancy-field-error" style="{errorTextStyle}"></div>',"</div>",'<div class="fancy-clearfix"></div>'],ons:function(){var e=this,d=e.el.getByTag("table"),c=e.el.getByTag("input"),f=e.listEl;e.input=c;e.onsList();d.on("mousedown",function(g){g.preventDefault()});d.on("click",function(j){var g=Fancy.get(j.currentTarget),i=g.$dom.offset(),h=[i.left,i.top+g.$dom.height()];if(f.css("display")==="none"){f.css({display:"",left:h[0]+"px",top:h[1]+"px"});b(e.id)}else{f.css("display","none")}})},onsList:function(){var e=this,g=e.listEl,c=e.input,d=g.select("li"),f;d.hover(function(h){if(f){f.removeClass("fancy-combo-list-active")}Fancy.get(h.target).addClass("fancy-combo-list-active");f=Fancy.get(h.target)});d.on("click",function(j){var h=Fancy.get(j.target),i=h.attr("value");if(e.displayKey){}c.dom.value=i;e.set(i);g.css("display","none");e.onBlur()})},render:function(){var m=this,l=m.renderTo||document.body,c=document.createElement("div"),g=document.createElement("div"),o=m.value;if(o===undefined){o=""}else{var f=0,d=m.data.length,p=false;for(;f<d;f++){if(m.data[f][m.valueKey]===o){m.valueIndex=f;o=m.data[f][m.displayKey];p=true;break}}if(p===false){o=""}}m.fire("beforerender");c.className=m.cls;var k="",j="";if(m.labelWidth){k="width:"+m.labelWidth+"px;"}if(m.inputWidth){j="width:"+(m.inputWidth-20)+"px;"}var e=m.labelWidth+8+10;if(m.labelAlign==="top"){e=8}if(m.labelAlign==="right"){e=8}var h=['<ul style="position: relative;">'];Fancy.each(m.data,function(t,q){var r="",s=t[m.displayKey];if(q===0){r="fancy-combo-list-active"}if(s===""||s===" "){s="&nbsp;"}h.push('<li value="'+t[m.valueKey]+'" class="'+r+'">'+s+"</li>")});h.push("</ul>");var n=m.label;if(m.label===""){n="&nbsp;"}else{if(m.label===undefined){n="&nbsp;"}else{if(m.labelAlign!=="right"){n+=":"}}}c.innerHTML=m.tpl.getHTML({labelWidth:k,label:n,emptyText:m.emptyText,inputWidth:j,value:o,height:m.height});m.el=l.appendChild(c);m.el=Fancy.get(m.el);g.className="fancy-combo-result-list";if(m.theme){g.className+=" fancy-theme-"+m.theme}g.innerHTML=h.join("");$(g).css({display:"none",left:"0px",top:"0px",width:m.inputWidth+14});if(m.data.length>9){$(g).css({height:m.listRowHeight*9+"px",overflow:"auto"})}m.listEl=document.body.appendChild(g);m.listEl=Fancy.get(m.listEl);if(m.labelAlign==="top"){m.el.addClass("fancy-field-label-align-top")}else{if(m.labelAlign==="right"){m.el.addClass("fancy-field-label-align-right");$(c).find(".fancy-field-label").insertAfter($(c).find(".fancy-combo-text"))}}m.el.select(".fancy-combo-result-list").css("left",m.el.select(".fancy-combo-text").position().left+"px");if(m.valueIndex){m.acceptedValue=m.value}m.fire("afterrender");m.fire("render")},getValue:function(){var c=this;if(c.value===-1||c.value===undefined){return""}if(c.valueKey!==undefined){return c.value}return c.value},get:function(){return this.getValue()},set:function(j,f){var g=this,c="";var e=0,d=g.data.length,h=false;for(;e<d;e++){if(g.data[e][g.valueKey]==j){g.valueIndex=e;c=g.data[e][g.displayKey];h=true;break}}if(h===false){c=""}g.value=j;if(j===-1){g.input.dom.value=""}else{g.input.dom.value=c}if(f!==false){g.onInput()}},setValue:function(d,c){this.set(d,c)},setData:function(e){var d=this,c=[];d.data=e;Fancy.each(d.data,function(j,f){var g="",h=j[d.displayKey];if(f===0){g="fancy-combo-list-active"}if(h===""||h===" "){h="&nbsp;"}c.push('<li value="'+j[d.valueKey]+'" class="'+g+'">'+h+"</li>")});Fancy.get(d.listEl.select("ul")[0]).update(c.join(""));d.onsList()},onInput:function(g,f){var c=this,d=c.getValue();c.acceptedValue=c.get();c.fire("change",d)},clear:function(){var c=this;c.set(-1,false)},hideList:function(){var c=this,d=c.listEl;d.css("display","none")}})})();Fancy.Class(["Fancy.form.field.Line","Fancy.FieldLine"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.line",constructor:function(a){var b=this,a=a||{};Fancy.apply(b,a);b.Super("const",arguments)},init:function(){var d=this;d.addEvents();d.Super("init",arguments);d.tpl=new Fancy.Template(d.tpl);var b=0,a=d.items.length,e;for(;b<a;b++){var c=d.items[b];if(c.labelAlign==="top"){e=true;if(b===0){c.style={"padding-left":"0px"}}}}d.render();if(e){d.el.css("height","48px")}},cls:"fancy fancy-field fancy-field-line",value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-text fancy-field-line-items">',"</div>",]});Fancy.Class(["Fancy.form.field.Set","Fancy.SetField"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.set",constructor:function(a){var b=this,a=a||{};Fancy.apply(b,a);b.Super("const",arguments)},init:function(){var d=this;d.addEvents("collapsed","expanded");d.Super("init",arguments);d.tpl=new Fancy.Template(d.tpl);var b=0,a=d.items.length,e;for(;b<a;b++){var c=d.items[b];if(c.labelAlign==="top"){e=true;if(b===0){c.style={"padding-left":"0px"}}}}d.render();if(d.checkbox!==undefined){d.initCheckBox()}d.on("collapsed",d.onCollapsed,d);d.on("expanded",d.onExpanded,d)},cls:"fancy fancy-field-set",value:"",width:100,emptyText:"",tpl:["<fieldset>","<legend>",'<div class="fancy-field-checkbox-input" style="float:left;margin-top: 4px;display: none;"></div>','<div class="fancy-field-set-label" style="float:left;">{label}</div>','<div class="fancy-clearfix"></div>',"</legend>",'<div class="fancy-field-text fancy-field-set-items">',"</div>","</fieldset>"],initCheckBox:function(){var a=this,b=Fancy.get(a.el.select(".fancy-field-checkbox-input")[0]);b.css("display","");if(a.checkbox===true){a.el.addClass("fancy-checkbox-on")}var d=a.el.select(".fancy-field-set-items"),c=d.css("height");setTimeout(function(){var f=a.el.select(".fancy-field-set-items"),e=parseInt(f.css("height"));if(a.checkbox===true){}else{a.fire("collapsed")}});if(a.checkbox===true){d.css("display","");a.el.removeClass("fancy-set-collapsed")}else{d.css("display","none");a.el.addClass("fancy-set-collapsed")}b.on("click",function(){a.el.toggleClass("fancy-checkbox-on");var f=a.el.hasClass("fancy-checkbox-on"),e=a.el.select(".fancy-field-set-items");if(f){e.css("display","");a.el.removeClass("fancy-set-collapsed");a.fire("expanded")}else{e.css("display","none");a.el.addClass("fancy-set-collapsed");a.fire("collapsed")}})},onCollapsed:function(){var b=this,a=b.form,d=b.el.select(".fancy-field-set-items"),c=parseInt(d.css("height"));a.setHeight(a.getHeight()-c)},onExpanded:function(){var b=this,a=b.form,d=b.el.select(".fancy-field-set-items"),c=parseInt(d.css("height"));a.setHeight(a.getHeight()+c)},});Fancy.Class(["Fancy.form.field.HTML","Fancy.HTMLField"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.html",constructor:function(a){var b=this,a=a||{};Fancy.apply(b,a);b.Super("const",arguments)},init:function(){var a=this;a.addEvents("focus","blur","input","enter","up","down","change","key");a.Super("init",arguments);a.tpl=new Fancy.Template(a.tpl);a.render();if(a.hidden){a.el.css("display","none")}if(a.style){a.el.css(a.style)}},cls:"fancy fancy-field-html",value:"",width:100,emptyText:"",tpl:['<div class="" style="">',"{value}","</div>",],render:function(){var b=this,c=b.renderTo||document.body,a=document.createElement("div");b.prepareValid();b.fire("beforerender");a.className=b.cls;a.innerHTML=b.tpl.getHTML({value:b.value,height:b.height,});b.el=c.appendChild(a);b.el=Fancy.get(b.el);b.acceptedValue=b.value;b.fire("afterrender");b.fire("render")}});Fancy.Class(["Fancy.form.field.Radio","Fancy.Radio"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.radio",constructor:function(){var a=this;a.Super("const",arguments)},init:function(){var f=this;f.addEvents("focus","blur","input","up","down","change","key");f.Super("init",arguments);f.tpl=new Fancy.Template(f.tpl);var d="",b=f.items,c=0,a=b.length;if(f.column){f.cls+=" fancy-field-radio-column";d+='<div style="margin-left: '+(f.labelWidth+10)+'px;">'}for(;c<a;c++){var e=b[c],h="",g="fancy-field-text";if(!f.column&&c!==0){h="margin-left:10px;"}if(e.value===f.value){g+=" fancy-field-radio-on"}d+=['<div class="'+g+'" value='+e.value+">",'<div class="fancy-field-radio-input" style="float:left;'+h+'"></div>','<div style="float:left;margin:7px 0px 0px 0px;">'+e.text+"</div>","</div>",].join("")}if(f.column){d+="</div>"}f.itemsHTML=d;f.render();f.acceptedValue=f.value;f.set(f.value);f.ons()},labelText:"",labelWidth:60,value:false,checkedCls:"fancy-field-radio-on",cls:"fancy fancy-field fancy-field-radio",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>","{itemsHTML}",'<div class="fancy-clearfix"></div>'],ons:function(){var b=this,a=b.el;a.$dom.delegate(".fancy-field-text","click",function(){b.set(Fancy.get(this).attr("value"))});a.on("mousedown",b.onMouseDown,b)},onClick:function(){var b=this,a=b.el,c=b.checkedCls;b.addClass(c);console.log(a.attr("value"));a.toggleClass(c);b.value=a.hasClass(c);b.fire("change",b.value)},onMouseDown:function(d,c){var b=this,a=b.el;d.preventDefault()},set:function(e,c){var d=this,b=d.el,f=d.checkedCls,a=b.select(".fancy-field-text");a.removeClass(f);b.select("[value="+e+"]").addClass(f);d.value=e;if(c!==false){d.fire("change",d.value)}},setValue:function(b,a){this.set(b,a)},getValue:function(){var a=this;return a.value},get:function(){return this.getValue()},clear:function(){this.set(false)}});Fancy.Class(["Fancy.form.field.ReCaptcha","Fancy.ReCaptcha"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.recaptcha",constructor:function(a){var b=this,a=a||{};Fancy.apply(b,a);b.Super("const",arguments)},init:function(){var b=this;b.addEvents("focus","blur","input","enter","up","down","change","key");b.Super("init",arguments);b.tpl=new Fancy.Template(b.tpl);b.render();b.name="recaptcha";if(b.hidden){b.el.css("display","none")}if(b.style){b.el.css(b.style)}var a=document.createElement("script");a.type="text/javascript";a.src="https://www.google.com/recaptcha/api.js";Fancy.get(document.head).append(a)},get:function(){var a=this,b=a.el.select("form");if(a.value){return a.value}a.value="wait";b.one("submit",function(c){c.preventDefault();a.value=$(this).serialize().replace("g-recaptcha-response=","")});b.submit();return a.value},cls:"fancy fancy-field",value:"",width:100,tpl:['<form action="post.php" method="POST">','<div class="g-recaptcha" data-sitekey="{key}"></div>',"</form>"]});