var Fancy={global:this,version:"0.2.6"};Fancy.apply=function(a,b){for(var c in b)a[c]=b[c]},Fancy.applyIf=function(a,b){for(var c in b)void 0===a[c]&&(a[c]=b[c])},Fancy.namespace=function(){for(var a=0,b=arguments.length;b>a;a++){var c=arguments[a],d=c.split("."),e=1,f=d.length;Fancy.global[d[0]]=Fancy.global[d[0]]||{};for(var g=Fancy.global[d[0]];f>e;e++)g[d[e]]=g[d[e]]||{},g=g[d[e]]}},Fancy.ns=Fancy.namespace,Fancy.typeOf=function(a){if(null===a)return"null";var b=typeof a;if("undefined"===b||"string"===b||"number"===b||"boolean"===b)return b;var c=Object.prototype.toString,d=c.call(a);switch(d){case"[object Array]":return"array";case"[object Date]":return"date";case"[object Boolean]":return"boolean";case"[object Number]":return"number";case"[object RegExp]":return"regexp"}return"function"===b?"function":"object"===b?"object":void 0},Fancy.isArray="isArray"in Array?Array.isArray:function(a){var b=Object.prototype.toString;return"[object Array]"===b.call(a)},Fancy.isObject=function(a){var b=Object.prototype.toString;return"[object Object]"===b.call(a)},Fancy.isFunction=function(a){var b=Object.prototype.toString;return"[object Function]"===b.apply(a)},Fancy.isString=function(a){return"string"==typeof a},Fancy.isNumber=function(a){return"number"==typeof a&&isFinite(a)},Fancy.isBoolean=function(a){return"boolean"==typeof a},Fancy.each=function(a,b){var c=Fancy.typeOf(a);switch(c){case"array":for(var d=0,e=a.length;e>d;d++)b(a[d],d,a);break;case"object":for(var f in a)b(a[f],f,a)}},Fancy.trait=function(a,b){if(b.classes){var c=0,d=b.classes,e=d.length;if("object"===Fancy.typeOf(b.classes[0]))for(;e>c;c++)for(var f=d[c],g=f._class,h=f.methods,i=0,j=h.length;j>i;i++){var k=h[i];a[k]=g.prototype[k]}else for(;e>c;c++)Fancy.apply(a,d[c].prototype)}if(b.methods)for(var l,c=0,h=b.methods,e=h.length;e>c;c++)l=h[c],a[l.name]=l.method},Fancy.applyConfig=function(a,b){var c,b=b||{};if(a._isConfigApplied===!0)return a;for(c in b)a[c]=b[c];return a._isConfigApplied=!0,a},Fancy.apply(Fancy,{prefix:"fancy-gen",idSeed:0,zIndex:1,id:function(a,b){return a?(a=a.dom||{},a.id||(a.id=(b||Fancy.prefix)+ ++Fancy.idSeed),a.id):(b||Fancy.prefix)+ ++Fancy.idSeed}}),function(){var a=navigator.userAgent.toLowerCase(),b=function(b){return b.test(a)},c=b(/opera/),d=!c&&b(/msie/);Fancy.apply(Fancy,{isOpera:c,isIE:d}),Fancy.getViewSize=function(){var a=[];return Fancy.isIE?(a[0]=document.documentElement.clientHeight,a[1]=document.documentElement.clientWidth):(a[0]=window.innerHeight,a[1]=window.innerWidth),a},Fancy.getScroll=function(){var a=document.documentElement,b=document.body;return a&&(a.scrollTop||a.scrollLeft)?[a.scrollTop,a.scrollLeft]:b?[b.scrollTop,b.scrollLeft]:[0,0]}}(),Fancy.Collection=function(a){var b=this;if(b.items=[],b.keys=[],b.map={},b.indexMap={},b.length=0,a)if(a.length>0)for(var c=0,d=a.length;d>c;c++)b.add(c,a[c]);else for(var e in a)b.add(e,a[e])},Fancy.Collection.prototype={add:function(a,b){var c=this;c.items.push(b),c.keys.push(a),c.map[a]=b,c.indexMap[a]=c.length,c.length++},remove:function(a){var b=this,c=b.indexMap[a];b.items.splice(c,1),b.keys.splice(c,1),delete b.indexMap[c],delete b.map[a],b.length--},removeAll:function(){var a=this;a.items=[],a.keys=[],a.indexMap={},a.map={},a.length=0},get:function(a){var b=this;return b.map[a]},each:function(a){for(var b=this,c=0,d=b.length;d>c;c++)a(b.keys[c],b.items[c],c,b.length)}},Fancy.Template=function(a){var b=this;b.tpl=a.join(""),b.compile()},Fancy.Template.prototype={re:/\{([\w\-]+)\}/g,getHTML:function(a){var b=this;return b.compiled(a)},compile:function(){function fn(a,b){return b="values['"+b+"']","'+("+b+" === undefined ? '' : "+b+")+'"}var me=this,sep="+";return eval("me.compiled = function(values){ return '"+me.tpl.replace(me.re,fn)+"';};"),me}},Fancy.key={BACKSPACE:8,TAB:9,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_PLUS:107,NUM_MINUS:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90},Fancy.Key={isNum:function(a){var b=Fancy.key;switch(a){case b.ZERO:case b.ONE:case b.TWO:case b.THREE:case b.FOUR:case b.FIVE:case b.SIX:case b.SEVEN:case b.EIGHT:case b.NINE:case b.NUM_ZERO:case b.NUM_ONE:case b.NUM_TWO:case b.NUM_THREE:case b.NUM_FOUR:case b.NUM_FIVE:case b.NUM_SIX:case b.NUM_SEVEN:case b.NUM_EIGHT:case b.NUM_NINE:return!0;default:return!1}},isNumControl:function(a,b){var c=Fancy.key;if(Fancy.Key.isNum(a))return!0;if(b.shiftKey&&187===a)return!0;switch(a){case c.NUM_PLUS:case 189:case c.NUM_MINUS:case c.BACKSPACE:case c.DELETE:case c.TAB:case c.ENTER:case c.RETURN:case c.SHIFT:case c.CTRL:case c.ALT:case c.ESC:case c.END:case c.HOME:case c.LEFT:case c.UP:case c.RIGHT:case c.DOWN:case c.INSERT:return!0;default:return!1}}},function(){var a={},b={},c=function(a,b){for(var c in b.prototype)void 0===a.prototype[c]&&(a.prototype[c]=b.prototype[c])},d=function(){};d.prototype={items:new Fancy.Collection,add:function(a,b){var c=a.split("."),d=1,e=c.length-1;Fancy.ns(a);for(var f=Fancy.global[c[0]];e>d;d++)f=f[c[d]];c.length>1?f[c[c.length-1]]=b:Fancy.global[c[0]]=b,this.items.add(a,b)},get:function(a){return this.items.get(a)}},Fancy.ClassManager=new d,Fancy.Class=function(d,e){var e=e||{},f=[];if(Fancy.isArray(d)&&(f=d,d=f[0]),e.constructor===Object&&(void 0===e.extend?e.constructor=function(){}:e.constructor=function(){this.Super("constructor",arguments)}),void 0===e.extend)a[d]=e.constructor;else{a[d]=e.constructor;var g;switch(typeof e.extend){case"string":g=Fancy.ClassManager.get(e.extend),a[d].prototype.$Super=Fancy.ClassManager.get(e.extend);break;case"function":g=e.extend,a[d].prototype.$Super=e.extend}delete e.extend,a[d].prototype.Super=function(a,b){var c=this;switch(c.$Iam?c.$Iam=Fancy.ClassManager.get(c.$Iam.prototype.$Super.prototype.$name):c.$Iam=Fancy.ClassManager.get(c.$Super.prototype.$name),a){case"const":case"constructor":c.$Iam.apply(c,b);break;default:c.$Iam.prototype[a].apply(c,b)}delete c.$Iam},c(a[d],g)}a[d].prototype.$name=d,e.traits&&(Fancy.trait(a[d].prototype,e.traits),delete a[d].prototype.traits),void 0!==e.plugins&&(void 0===a[d].prototype.$plugins&&(a[d].prototype.$plugins=[]),a[d].prototype.$plugins=a[d].prototype.$plugins.concat(e.plugins),delete a[d].prototype.plugins);for(var h in e)a[d].prototype[h]=e[h];var i=a[d];e.singleton===!0&&(delete a[d],i=new i(e),a[d]=i),f.length>1?Fancy.each(f,function(a){Fancy.ClassManager.add(a,i)}):Fancy.ClassManager.add(d,i),e.type?(b[e.type]=i,Fancy.addWidgetType(e.type,i)):e.ptype&&(b[e.type]=i,Fancy.addPluginByType(e.ptype,i))},Fancy.getClassByType=function(a){return b[a]}}(),Fancy.TraitClass=function(){},Fancy.TraitClass.prototype={initId:function(){var a=this,b=a.prefix||Fancy.prefix;a.id=a.id||Fancy.id(null,b),Fancy.addWidget(a.id,a)},initPlugins:function(){var a,b,c,d=this,e=d;if(void 0!==d.plugins&&(d.$plugins=d.plugins,delete d.plugins),void 0!==d.$plugins)for(var f,g=0,h=d.$plugins,i=h.length;i>g;g++){c=h[g],c.widget=e;var j=c.type||c.ptype;a=Fancy.getPluginByType(j),b=new a(c),f=c.inWidgetName||b.inWidgetName,void 0!==f&&(e[f]=b)}}},Fancy.Class("Fancy.Data",{constructor:function(a){var b=this;if(b.map={},a)for(var c=0,d=a.length,e=b.map;d>c;c++)e[c]=a[c];b.length=0},add:function(a,b){var c=this;c.map[a]=b,c.length++},get:function(a){return this.map[a]}}),Fancy.Class("Fancy.Model",{constructor:function(a){var b=this;if(Fancy.isArray(a)){for(var c={},d=b.fields,e=0,f=d.length;f>e;e++){var g=d[e];c[g]=a[e]}b.data=c}else{if(void 0===b.fields){var d=[];for(var g in a)d.push(g);b.fields=d}for(var c={},d=b.fields,e=0,f=d.length;f>e;e++){var g=d[e];c[g]=a[g]}b.data=c}},get:function(a){var b=this;return b.data[a]},set:function(a,b){var c=this;c.data[a]=b}}),Fancy.Class("Fancy.Store",{extend:Fancy.Event,constructor:function(a){var b=this,a=a||{};Fancy.applyConfig(b,a),b.Super("const",arguments),b.init(),b.data=[],b.setModel(),a.data&&(b.setData(a.data),delete a.data),b.init()},init:function(){var a=this;a.addEvents("add"),a.initId(),a.initPlugins()},setModel:function(){var a=this,b=a.model;if(b=void 0===b?Fancy.Model:Fancy.ClassManager.get(a.model),a.model=b,a.fields=b.prototype.fields,void 0===a.fields)throw new Error("needed to set fields in Model of Store")},setData:function(a){var b=this,c=0,d=a.length,e=b.model;if(Fancy.isObject(a[0]))for(;d>c;c++)b.data[c]=new e(a[c]);else for(;d>c;c++)b.data[c]=new e(a[c])},add:function(a){var b=this;b.data.push(a),b.fire("add",a)}}),Fancy.Class("Fancy.PluginManager",{singleton:!0,constructor:function(){var a=this;a.ptypes=new Fancy.Data},addPlugin:function(a,b){this.ptypes.add(a,b)},getPlugin:function(a){return this.ptypes.get(a)}}),Fancy.addPluginByType=function(a,b){Fancy.PluginManager.addPlugin(a,b)},Fancy.getPluginByType=function(a){return Fancy.PluginManager.getPlugin(a)},Fancy.Class("Fancy.WidgetManager",{singleton:!0,constructor:function(){var a=this;a.wtypes=new Fancy.Data,a.widgets=new Fancy.Data},addWidgetType:function(a,b){b.prototype.wtype=a,this.wtypes.add(a,b)},getWidgetClassByType:function(a){return this.wtypes.get(a)},addWidget:function(a,b){this.widgets.add(a,b)},getWidget:function(a){return this.widgets.get(a)}}),Fancy.addWidgetType=function(a,b){Fancy.WidgetManager.addWidgetType(a,b)},Fancy.getWidgetClassByType=function(a){return Fancy.WidgetManager.getWidgetClassByType(a)},Fancy.addWidget=function(a,b){Fancy.WidgetManager.addWidget(a,b)},Fancy.getWidget=function(a){return Fancy.WidgetManager.getWidget(a)},function(){var a=0,b={};Fancy.Class(["Fancy.Event","Fancy.Observable"],{traits:{classes:[Fancy.TraitClass]},constructor:function(a){var b=this,a=a||{};if(Fancy.applyConfig(b,a),b.$events={},b.listeners||b.events)for(var c=b.listeners||b.events,d=0,e=c.length;e>d;d++){var f=c[d],g=null,h=null,i=null,j=[];for(var k in f)"scope"===k?i=f[k]:"params"===k?j=f[k]:(g=k,h=f[k]);if(null===g||Fancy.isFunction(h)===!1)throw new Error("Event was not set");if(Fancy.isArray(j)===!1)throw new Error("params must be array");b.addEvent(g),b.on(g,h,i,j)}},on:function(c,d,e,f){if(void 0===this.$events[c])throw console.log(arguments),new Error("Event name is not set: "+c);d.$mtFnSeed=a,b[a]=d,a++,this.$events[c].push({fn:d,scope:e,params:f||[]})},un:function(a,b){var c=this,d=c.$events[a];if(!d)return!1;for(var e=0,f=d.length;f>e;e++){var g=d[e];if(g.fn.$mtFnSeed===b.$mtFnSeed)return g.toRemove=!0,!0}return!1},once:function(a,b,c){var d=this,e=function(){b.apply(this,arguments),d.un(a,e)};d.on(a,e,c)},unAll:function(){this.$events={}},unAllByType:function(a){this.$events[a]=[]},fire:function(a){var b=this,c=b.$events[a];if(!c)return!1;for(var d=1,e=arguments.length,f=[b];e>d;d++)f.push(arguments[d]);for(var d=0,e=c.length;e>d;d++){var g=c[d],h=[];g.toRemove!==!0?(h=h.concat(f),g.params&&(h=h.concat(g.params)),g.fn.apply(g.scope||b,h)):(c.splice(d,1),d--,e=c.length)}},addEvent:function(a){var b=this;b.$events[a]=b.$events[a]||[]},addEvents:function(a){var b=this;if(arguments.length>1){for(var c=[],d=0,e=arguments.length;e>d;d++)c[d]=arguments[d];a=c}if("string"===Fancy.typeOf(a))b.$events[a]=b.$events[a]||[];else if("array"===Fancy.typeOf(a))for(var d=0,e=a.length;e>d;d++)b.$events[a[d]]=b.$events[a[d]]||[]},has:function(a){var b=this.$events[a];return b?0!==b.length:!1}})}(),Fancy.$=$,Fancy.get=function(a){var b=Fancy.typeOf(a);switch(b){case"string":return new Fancy.Element(Fancy.$("#"+a)[0]);default:return new Fancy.Element(a)}},Fancy.Element=function(a){var b=this;b.dom=a,b.$dom=Fancy.$(a)},Fancy.Element.prototype={on:function(a,b,c){var d=this;c?d.$dom.on(a,$.proxy(b,c)):d.$dom.on(a,b)},un:function(){},getByClass:function(a){var b=this;return b.$dom.find("."+a)[0]},getByTag:function(a){var b=this;return Fancy.get(b.$dom.find(a)[0])},addClass:function(a){var b=this;b.$dom.addClass(a)},removeClass:function(a){var b=this;b.$dom.removeClass(a)},hasClass:function(a){var b=this;return b.$dom.hasClass(a)},toggleClass:function(a){var b=this;b.$dom.toggleClass(a)},select:function(a){var b=this;return b.$dom.find(a)},attr:function(a,b){return void 0===b?this.$dom.attr(a):this.$dom.attr(a,b)},css:function(a,b){return void 0===b?this.$dom.css(a):this.$dom.css(a,b)},append:function(a){return this.$dom.append(a)[0]},height:function(){return this.$dom.height()},width:function(){return this.$dom.width()},parent:function(a){return Fancy.get(this.$dom.parent(a)[0])},update:function(a){this.dom.innerHTML=a}},Fancy.select=function(a){return Fancy.get(document.body).select(a)},Fancy.onReady=function(a){$(document).ready(a)},Fancy.Ajax=function(a){var b={};a.url&&(b.url=a.url),a.success&&(b.success=a.success),a.error&&(b.error=a.error),a.method&&(b.type=a.method),a.params&&(b.data=a.params),$.ajax(b)},Fancy.Class("Fancy.Widget",{extend:Fancy.Event,constructor:function(a){var b=this;Fancy.applyConfig(b,a),b.Super("const",arguments),b.init()},init:function(){var a=this;a.initId(),a.addEvents("beforerender","afterrender","render","show","hide","destroy"),a.initPlugins()},renderItems:function(a){for(var b=this,c=0,d=b.items.length;d>c;c++){var e=b.items[c],f=Fancy.getClassByType(e.type);e.renderTo=a,b.items[c]=new f(e)}}}),Fancy.Class("Fancy.Button",{extend:Fancy.Widget,constructor:function(a,b){var c=this;c.scope=b,c.Super("const",arguments)},init:function(){var a=this;a.addEvents("click","mousedown","mouseup","mouseover","mouseout"),a.Super("init",arguments),a.style=a.style||{},a.render(),a.setOns()},setOns:function(){var a=this,b=a.el;b.on("click",a.onClick,a),b.on("mousedown",a.onMouseDown,a),b.on("mouseup",a.onMouseUp,a),b.on("mouseover",a.onMouseOver,a),b.on("mouseout",a.onMouseOut,a)},cls:"fancy fancy-button",text:"",height:28,paddingTextWidth:5,render:function(){var a=this,b=Fancy.get(a.renderTo||document.body).dom,c=document.createElement("div"),d=0;a.fire("beforerender"),a.width?d=a.width:(d=2*a.paddingTextWidth,d+=7*a.text.length),c.className=a.cls,c.style.width=d+"px",c.style.height=a.height+"px",c.innerHTML=['<div class="fancy-button-text">',a.text,"</div>"].join(""),a.el=Fancy.get(b.appendChild(c)),Fancy.each(a.style,function(b,c){a.el.css(c,b)}),a.disabled&&a.disable(),a.fire("afterrender"),a.fire("render")},onClick:function(){var a=this;a.fire("click"),a.handler&&(a.scope?a.handler.apply(a.scope,[a]):a.handler(a))},onMouseDown:function(){var a=this;a.fire("mousedown")},onMouseUp:function(){var a=this;a.fire("mouseup")},onMouseOver:function(){var a=this;a.fire("mouseover")},onMouseOut:function(){var a=this;a.fire("mouseout")},setText:function(a){var b=this;Fancy.get(b.el.select(".fancy-button-text")[0]).update(a)},disable:function(){var a=this;a.el.addClass("fancy-button-disabled")},enable:function(){var a=this;a.el.removeClass("fancy-button-disabled")}}),Fancy.Class("Fancy.toolbar.Tab",{extend:Fancy.Button,constructor:function(a,b){var c=this;c.scope=b,c.Super("const",arguments)},init:function(){var a=this;a.Super("init",arguments)},cls:"fancy fancy-button fancy-toolbar-tab",render:function(){var a=this;a.Super("render",arguments)}}),Fancy.Class("Fancy.Panel",{extend:Fancy.Widget,constructor:function(){var a=this,b=b||{};Fancy.apply(a,b),a.Super("constructor",arguments)},init:function(){var a=this;a.Super("init",arguments),a.render()},cls:"fancy fancy-panel",value:"",width:300,height:200,titleHeight:30,title:void 0,frame:!1,shadow:!0,render:function(){var a=this,b=Fancy.get(a.renderTo||document.body),c=document.createElement("div"),d=a.cls,e=void 0!==a.title,f=0,g=a.titleHeight;a.theme&&(d+=" fancy-theme-"+a.theme),a.shadow&&(d+=" fancy-panel-shadow"),c.className=d,c.style.width=a.width+"px",c.style.height=a.height-f+"px",a.style&&Fancy.apply(c.style,a.style),c.innerHTML=['<div style="'+(e?"":"display: none;")+"height:"+g+'px;" class="fancy-panel-header">','<div class="fancy-panel-header-text">',a.title,"</div>",'<div class="fancy-panel-header-tools">',"</div>","</div>",'<div class="fancy-panel-body ">',"</div>"].join(""),a.el=b.dom.appendChild(c),a.el=Fancy.get(a.el),a.modal&&0===Fancy.select("fancy-modal").length&&Fancy.get(document.body).append('<div class="fancy-modal" style="display: none;"></div>'),a.renderTools()},renderTools:function(){var a=this,b=a.tools;if(void 0!==b)for(var c=0,d=b.length;d>c;c++)a.tools[c].renderTo=a.el.select(".fancy-panel-header-tools")[0],a.tools[c]=new Fancy.Tool(a.tools[c],a.scope)}}),Fancy.Class("Fancy.Tool",{extend:Fancy.Widget,constructor:function(a,b){var c=this;c.scope=b,c.Super("const",arguments)},init:function(){var a=this;a.addEvents("click","mousedown","mouseup","mouseover","mouseout"),a.Super("init",arguments),a.style=a.style||{},a.render(),a.setOns()},setOns:function(){var a=this,b=a.el;b.on("click",a.onClick,a)},cls:"fancy fancy-button",text:"",height:28,paddingTextWidth:5,render:function(){var a=this,b=Fancy.get(a.renderTo||document.body).dom,c=document.createElement("div");a.fire("beforerender"),c.className="fancy-tool-button",c.innerHTML=a.text,a.el=Fancy.get(b.appendChild(c)),a.fire("afterrender"),a.fire("render")},onClick:function(){var a=this;a.fire("click"),a.handler&&(a.scope?a.handler.apply(a.scope,[a]):a.handler(a))},setText:function(a){var b=this;b.el.update(a)}}),Fancy.Class("Fancy.Form",{extend:Fancy.Widget,type:"form",theme:"default",constructor:function(a){var b=this;a=b.prepareConfig(a);var c=a.titleHeight||30,d=a.titleBorders||[1,1,1,1],e=a.buttonsBarHeight||37,f=a.buttonBarBorders||[1,0,0,0],g=a.formBorders||[1,1,1,1],h={};a.window===!0&&(h.display="none",h.position="absolute"),b.titleHeight=c,b.titleBorders=d,b.buttonBarHeight=e,b.buttonBarBorders=f,b.formBorders=g;var i=new Fancy.Panel({renderTo:a.renderTo,title:a.title,titleBorders:d,width:a.width,height:a.height,buttons:a.buttons,tabs:a.tabs,buttonBarHeight:e,titleHeight:c,style:h,modal:a.modal,theme:a.theme||"",tools:a.tools||void 0,scope:b});a.renderTo=i.el.getByClass("fancy-panel-body"),a.isPanel=!0,b.Super("const",arguments)},prepareConfig:function(a){if(a.id||a.renderTo||(a.window=!0,void 0===a.modal&&(a.modal=!0)),"light-blue"===a.theme&&(Fancy.isObject(a.title)?a.title.height=40:Fancy.isString(a.title)&&(a.title={text:a.title,height:40}),a.borders=[1,2,2,2],a.buttons&&(Fancy.isObject(a.buttons)?a.buttons.height=44:Fancy.isArray(a.buttons)&&(a.buttons={height:44,items:a.buttons}))),a.borders&&(a.formBorders=a.borders),Fancy.isObject(a.title)){var b=a.title;b.text&&(a.title=b.text),b.height&&(a.titleHeight=b.height),b.borders&&(a.titleBorders=b.borders)}if(Fancy.isObject(a.buttons)){var c=a.buttons;c.items&&(a.buttons=c.items),c.height&&(a.buttonsBarHeight=c.height),c.borders&&(a.buttonsBarBorders=c.borders)}return a},init:function(){var a=this;if(a.Super("init",arguments),a.defaults)for(var b in a.defaults)Fancy.each(a.items,function(c){void 0===c[b]&&(c[b]=a.defaults[b])});Fancy.each(a.items,function(b){b.theme=a.theme||"",void 0===b.labelWidth&&(b.labelWidth=a.labelWidth),void 0===b.inputWidth&&(b.inputWidth=a.inputWidth),("pass"===b.type||"password"===b.type)&&(b.type="string",b.isPassword=!0)}),a.addEvents(),a.tpl=new Fancy.Template(a.tpl),a.render(),a.ons()},cls:"fancy fancy-form",value:"",width:200,emptyText:"",labelWidth:65,inputWidth:100,tpl:['<div class="fancy-panel-tbar" style="{isTBar}{buttonBarHeight}">',"</div>",'<div class="fancy-form-body">',"</div>",'<div class="fancy-panel-bbar" style="{isBBar}{buttonBarHeight}">',"</div>"],render:function(){var a=this,b=a.renderTo||document.body,c=document.createElement("div"),d="display: none;",e="display: none;",f=a.buttonBarHeight,g=a.titleHeight;if(a.tabs&&(d=""),a.buttons&&(e=""),a.fire("beforerender"),a.height-=a.formBorders[0],a.height-=a.formBorders[2],a.isPanel===!0&&(Fancy.get(c).css("border-width","0px"),a.title&&(a.height-=g,a.height-=a.titleBorders[0],a.height-=a.titleBorders[2])),c.className=a.cls,c.style.width=a.width+"px",c.style.height=a.height+"px",c.innerHTML=a.tpl.getHTML({isTBar:d,isBBar:e,buttonBarHeight:"height:"+f+"px"}),a.el=Fancy.get(b.appendChild(c)),a.renderItems(a.el.getByClass("fancy-form-body")),a.setActiveTab(),a.tabs)for(var h=0,i=a.tabs.length;i>h;h++){var j={};Fancy.isString(a.tabs[h])?j.text=a.tabs[h]:j=a.tabs[h],j.renderTo=a.el.getByClass("fancy-panel-tbar"),a.tabs[h]=j,a.activeTab!==h&&(a.tabs[h].disabled=!0),void 0===a.tabs[h].handler&&(a.tabs[h].handler=function(b){return function(){a.setActiveTab(b);for(var c=0,d=a.tabs.length;d>c;c++)a.tabs[c].disable();a.tabs[b].enable()}}(h)),a.tabs[h]=new Fancy.toolbar.Tab(a.tabs[h],a)}if(a.buttons)for(var h=a.buttons.length;h--;)a.buttons[h].renderTo=a.el.getByClass("fancy-panel-bbar"),a.buttons[h]=new Fancy.Button(a.buttons[h],a);a.fire("afterrender"),a.fire("render")},renderItems:function(a,b,c){for(var d=this,b=b||d.items,e=0,f=b.length,g=[],c=c||0;f>e;e++){var h,i=b[e];switch(i.theme=d.theme,i.type){case"pass":case"password":h=Fancy.form.field.String,i.type="string",i.isPassword=!0;break;case"hidden":h=Fancy.form.field.String,i.hidden=!0;break;case"line":case"row":if(h=Fancy.form.field.Line,i.defaults)for(var j=0,k=i.items.length;k>j;j++)Fancy.applyIf(i.items[j],i.defaults);break;case"set":case"fieldset":if(h=Fancy.form.field.Set,i.form=d,i.defaults)for(var j=0,k=i.items.length;k>j;j++)Fancy.applyIf(i.items[j],i.defaults);break;case"string":h=Fancy.form.field.String;break;case"number":h=Fancy.form.field.Number;break;case"textarea":h=Fancy.form.field.TextArea;break;case"checkbox":h=Fancy.form.field.CheckBox;break;case"combo":h=Fancy.form.field.Combo;break;case"html":h=Fancy.form.field.HTML;break;case"radio":h=Fancy.form.field.Radio;break;case"recaptcha":h=Fancy.form.field.ReCaptcha;break;case"chat":h=Fancy.form.field.Chat;break;case"tab":if(h=Fancy.form.field.Tab,i.form=d,i.defaults)for(var j=0,k=i.items.length;k>j;j++)Fancy.applyIf(i.items[j],i.defaults);break;default:throw new Error("type "+i.type+" is not set")}i.renderTo=i.renderTo||a;var l=new h(i);switch(i.type){case"line":case"row":case"set":case"fieldset":case"tab":g.push(l);break;default:d.items[c]=l,c++}}for(var e=0,f=g.length;f>e;e++){var i=g[e];d.renderItems(i.el.select(".fancy-field-text")[0],i.items,c),c+=i.items.length}},setActiveTab:function(a){var b=this,c=b.el.select(".fancy-field-tab"),d=b.el.select(".fancy-field-tab-active");void 0!==a&&(b.activeTab=a),void 0!==b.activeTab&&(d.removeClass("fancy-field-tab-active"),Fancy.get(c[b.activeTab]).addClass("fancy-field-tab-active"))},ons:function(){var a=this;Fancy.each(a.items,function(b){switch(b.type){case"line":case"row":break;case"set":case"fieldset":b.on("collapsed",function(){}),b.on("expanded",function(){});break;case"tab":break;default:b.on("key",function(){a.fire("key",b.name,b.get())})}})},prevTab:function(){var a=this;a.activeTab--,a.activeTab<0&&(a.activeTab=0),a.setActiveTab()},nextTab:function(){var a=this,b=a.el.select(".fancy-field-tab").length;a.activeTab++,a.activeTab>=b&&(a.activeTab=b-1),a.setActiveTab()},get:function(a){var b=this;if(a){var c;return Fancy.each(b.items,function(b){return"html"!==b.type&&b.name===a?(c=b.get(),!0):void 0}),c}var d={};return Fancy.each(b.items,function(a){"html"!==a.type&&(d[a.name]=a.get())}),d},set:function(a,b){var c=this;return a?(Fancy.each(c.items,function(c){c.name===a&&c.set(b)}),b):void 0},clear:function(a){var b=this;Fancy.each(b.items,function(c){if("html"!==c.type&&"recaptcha"!==c.type){a!==!1&&c.clear();var d=c.el;d.hasClass("fancy-field-not-valid")&&(d.removeClass("fancy-field-not-valid"),d.css("height",parseInt(d.css("height"))-6+"px")),d.hasClass("fancy-field-blank-err")&&(d.removeClass("fancy-field-blank-err"),d.css("height",parseInt(d.css("height"))-6+"px")),c.name&&b.params&&b.params[c.name]&&delete b.params[c.name]}})},submit:function(a){var b=this,a=a||{},c=b.params||{};if(b.params=b.params||{},Fancy.apply(b,a),a.params&&(Fancy.apply(c,b.params),b.params=c),b.clear(!1),b.valid()!==!1){var d=b.get();return Fancy.apply(b.params,d),"wait"===b.params.recaptcha?void b.submit(a):void(""!==b.params.recaptcha&&(b.params["g-recaptcha-response"]=b.params.recaptcha,delete b.params.recaptcha,Fancy.Ajax(b)))}},valid:function(){var a=this,b=!0;return Fancy.each(a.items,function(a){b===!0?b=a.onBlur():a.onBlur()}),b},show:function(){var a=this;if(a.window===!0){var b=Fancy.getViewSize(),c=a.el.height(),d=a.el.width(),e=[],f=Fancy.getScroll(),g=f[0],h=f[1];e[0]=(b[1]-d)/2,e[1]=(b[0]-c)/2,e[0]<10&&(e[0]=10),e[1]<10&&(e[1]=10);var i=a.el.parent().parent();i.css({left:e[0]+h+"px",top:e[1]+g+"px",display:"","z-index":1e3+Fancy.zIndex++}),Fancy.select(".fancy-modal").css("display","")}},hide:function(){var a=this,b=a.el.parent().parent();b.css({display:"none"}),Fancy.select(".fancy-modal").css("display","none");for(var c=0,d=a.items.length;d>c;c++)"combo"===a.items[c].type&&a.items[c].hideList()},setHeight:function(a){var b=this;b.el.css("height",a+"px")},getHeight:function(){var a=this;return parseInt(a.el.css("height"))}});var FancyForm=function(a){return a.id||(a.window=!0,void 0===a.modal&&(a.modal=!0)),Fancy.$.fn.FancyForm(a)};FancyForm.get=function(a){console.log(Fancy.get(a))},FancyForm.vtype=function(a){Fancy.form.field.Trait.prototype.vtypes[a.type]=a},Fancy.$.fn.FancyForm=function(a){return a.renderTo=$(this.selector)[0],new Fancy.Form(a)},Fancy.ns("Fancy.form.field"),Fancy.form.field.Trait=function(){},Fancy.form.field.Trait.prototype={vtypes:{},ons:function(){var a=this,b=a.el.getByTag("input");a.input=b,b.on("blur",a.onBlur,a),b.on("focus",a.onFocus,a),b.on("input",a.onInput,a),b.on("keydown",a.onKeyDown,a),a.on("key",a.onKey,a)},prepareValid:function(){var a=this,b=a.valid,c=a.vtypes;if(b&&b.type){var d=c[b.type];if(!d)throw new Error("not right validation type - "+b.type);Fancy.applyIf(a.valid,d)}},render:function(){var a=this,b=a.renderTo||document.body,c=document.createElement("div");a.prepareValid(),a.fire("beforerender"),c.className=a.cls;var d="",e="",f="";a.itemsHTML&&(f=a.itemsHTML),"top"===a.labelAlign&&a.label&&a.labelWidth<7*a.label.length&&(a.labelWidth=7*(a.label.length+2)),a.labelWidth&&(d="width:"+a.labelWidth+"px;"),a.inputWidth&&(e="width:"+a.inputWidth+"px;");var g=a.label;""===a.label?g="&nbsp;":void 0===a.label?g="&nbsp;":"right"!==a.labelAlign&&(g+=":");var h="",i="",j="",k=a.labelWidth||0;k+=11,"top"===a.labelAlign&&(k=2),a.label===!1&&(h="display:none;"),a.inputLabel?j=a.inputLabel:i="display:none;","recaptcha"===a.type?c.innerHTML=a.tpl.getHTML({key:a.key}):c.innerHTML=a.tpl.getHTML({labelWidth:d,label:g,labelDisplay:h,inputLabelDisplay:i,inputLabel:j,emptyText:a.emptyText,inputWidth:e,value:a.value,height:a.height,itemsHTML:f,errorTextStyle:""}),a.el=b.appendChild(c),a.el=Fancy.get(a.el),"top"===a.labelAlign?(a.el.addClass("fancy-field-label-align-top"),a.el.select(".fancy-field-text").css("float","none")):"right"===a.labelAlign?(a.el.addClass("fancy-field-label-align-right"),$(c).find(".fancy-field-label").insertAfter($(c).find(".fancy-field-text"))):"radio"!==a.type,a.acceptedValue=a.value,a.fire("afterrender"),a.fire("render"),"recaptcha"!==a.type&&"chat"!==a.type&&setTimeout(function(){a.input&&0===a.input.dom.value.length&&(void 0===a.prevColor&&(a.prevColor=a.input.css("color")),a.input.css("color","grey"))},1)},onKeyDown:function(a){var b=this,c=a.keyCode,d=Fancy.key;if("number"===b.type&&Fancy.Key.isNumControl(c,a)===!1)return a.preventDefault(),void a.stopPropagation();switch(c){case d.ENTER:b.fire("enter",b.getValue()),"textarea"!==b.type&&(a.preventDefault(),a.stopPropagation());break;case d.UP:if("number"===b.type){var e=+b.get()+b.step;isNaN(e)&&(e=b.min||0),void 0!==b.max&&e>b.max?e=b.max:e<b.min&&(e=b.min),b.set(e)}b.fire("up",b.getValue()),"textarea"!==b.type&&(a.preventDefault(),a.stopPropagation());break;case d.DOWN:if("number"===b.type){var e=+b.get()-b.step;isNaN(e)&&(e=b.min||0),void 0!==b.min&&e<b.min?e=b.min:e>b.max&&(e=b.max),b.set(e)}b.fire("up",b.getValue()),"textarea"!==b.type&&(a.preventDefault(),a.stopPropagation());break;case d.LEFT:break;case d.RIGHT:a.stopPropagation();break;default:setTimeout(function(){b.input&&(0===b.input.dom.value.length?(void 0===b.prevColor&&(b.prevColor=b.input.css("color")),b.input.css("color","grey")):b.prevColor?b.input.css("color",b.prevColor):b.input.css("color"," "))},1)}setTimeout(function(){b.fire("key",b.getValue())},1)},onKey:function(){var a=this,b=a.valid;b&&b.type&&a.validate()},onBlur:function(){var a=this,b=a.el,c=a.valid,d=!0;return c&&(c.blank===!1&&("combo"===a.type&&0===a.get()||0===a.get().length)?(b.addClass("fancy-field-blank-err"),b.hasClass("fancy-field-not-valid")&&(b.removeClass("fancy-field-not-valid"),b.css("height",parseInt(b.css("height"))-6+"px")),c.blankText&&(b.css("height",parseInt(b.css("height"))+6+"px"),b.select(".fancy-field-error")[0].innerHTML=c.blankText)):c.type?a.validate():(b.removeClass("fancy-field-blank-err"),b.removeClass("fancy-field-not-valid"))),b.hasClass("fancy-field-blank-err")&&(d=!1),b.hasClass("fancy-field-not-valid")&&(d=!1),a.fire("blur"),d},onFocus:function(){var a=this,b=a.el;b.hasClass("fancy-field-blank-err")&&(a.el.removeClass("fancy-field-blank-err"),a.valid.blankText&&b.css("height",parseInt(b.css("height"))-6+"px")),a.fire("focus")},onInput:function(){var a=this,b=(a.input,a.getValue());a.acceptedValue=a.get(),a.fire("input",b),a.fire("change",b)},get:function(){var a=this;return a.input.dom.value},getValue:function(){return this.get()},set:function(a,b){var c=this;c.input.dom.value=a,b!==!1&&c.onInput()},setValue:function(a,b){this.set(a,b)},clear:function(){this.set("")},validate:function(){var a=this,b=a.el,c=a.valid,d=a.vtypes,e=d[c.type];if(!e)throw new Error("not right validation type - "+c.type);var f=a.get(),g=b.hasClass("fancy-field-not-valid");e.fn?e.fn(f)?b.removeClass("fancy-field-not-valid"):b.addClass("fancy-field-not-valid"):e.re&&(e.re.test(f)?b.removeClass("fancy-field-not-valid"):b.addClass("fancy-field-not-valid"));var h=b.hasClass("fancy-field-not-valid");return g===!1&&h===!0&&c.text&&b.css("height",parseInt(b.css("height"))+6+"px"),g===!0&&h===!1&&c.text&&b.css("height",parseInt(b.css("height"))-6+"px"),h&&(b.select(".fancy-field-error")[0].innerHTML=c.text),h}},FancyForm.vtype({type:"email",re:/^(")?(?:[^\."])(?:(?:[\.])?(?:[\w\-!#$%&'*+\/=?\^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,text:"Incorect email"}),Fancy.Class(["Fancy.form.field.String","Fancy.StringField"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.string",constructor:function(a){var b=this,a=a||{};Fancy.apply(b,a),b.Super("const",arguments)},init:function(){var a=this;a.addEvents("focus","blur","input","enter","up","down","change","key"),a.Super("init",arguments),a.tpl=new Fancy.Template(a.tpl),a.render(),a.ons(),a.isPassword&&a.input.attr({type:"password"}),a.hidden&&a.el.css("display","none"),a.style&&a.el.css(a.style)},cls:"fancy fancy-field",value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">','<input placeholder="{emptyText}" class="fancy-field-text-input" style="{inputWidth}" value="{value}">','<div class="fancy-field-error" style="{errorTextStyle}"></div>',"</div>",'<div class="fancy-clearfix"></div>']}),Fancy.Class(["Fancy.form.field.Number","Fancy.NumberField"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.number",allowBlank:!0,constructor:function(a){var b=this,a=a||{};Fancy.apply(b,a),b.Super("const",arguments)},init:function(){var a=this;a.addEvents("focus","blur","input","enter","up","down","change","key"),a.Super("init",arguments),a.tpl=new Fancy.Template(a.tpl),a.render(),a.ons(),a.hidden&&a.el.css("display","none"),a.style&&a.el.css(a.style)},cls:"fancy fancy-field",value:"",width:100,emptyText:"",step:1,max:1e20,min:-1e20,tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">','<input placeholder="{emptyText}" class="fancy-field-text-input" style="{inputWidth}" value="{value}">','<div class="fancy-field-error" style="{errorTextStyle}"></div>',"</div>",'<div class="fancy-clearfix"></div>'],
onInput:function(){var a=this,b=(a.input,a.get()),c=a.checkMinMax(b);(a.isNumber(b)===!1||"-"===b||"+"===b)&&(c=!1),""===b&&a.allowBlank?c=!0:""===b&&a.allowBlank===!1&&(c=!1,a.el.addClass("fancy-field-not-valid")),c&&(a.acceptedValue=a.get(),a.el.removeClass("fancy-field-not-valid")),a.fire("input",b),a.fire("change",b)},isNumber:function(a){return""===a||"-"===a?!0:Fancy.isNumber(+a)},checkMinMax:function(a){if(""===a||"-"===a)return!0;var b=this,a=+a;return a>=b.min&&a<=b.max}}),Fancy.Class(["Fancy.form.field.TextArea","Fancy.TextArea"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.textarea",constructor:function(){var a=this;a.Super("const",arguments)},init:function(){var a=this;a.addEvents("focus","blur","input","up","down","change","key"),a.Super("init",arguments),a.initHeight(),a.tpl=new Fancy.Template(a.tpl),a.render(),a.ons()},cls:"fancy fancy-field fancy-textarea",value:"",width:250,height:100,labelWidth:60,inputWidth:180,minHeight:100,maxHeight:210,lineHeight:12.5,emptyText:"",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-textarea-text">','<textarea autocomplete="off" placeholder="{emptyText}" type="text" class="fancy-textarea-text-input" style="{inputWidth}height:{height}px;">{value}</textarea>','<div class="fancy-field-error" style="{errorTextStyle}"></div>',"</div>",'<div class="fancy-clearfix"></div>'],ons:function(){var a=this,b=a.el.getByTag("textarea");a.input=b,b.on("blur",a.onBlur,a),b.on("focus",a.onFocus,a),b.on("input",a.onInput,a),b.on("keydown",a.onKeyDown,a),a.autoHeight&&b.on("input",a.onChange,a)},initHeight:function(){var a=this;if(a.autoHeight===!0){var b=a.value.match(/\n/g).length*a.lineHeight;b<a.minHeight?b=a.minHeight:b>a.maxHeight&&(b=a.maxHeight,setTimeout(function(){var b=a.el.getByTag("textarea");b.css({"overflow-y":"scroll"})},1)),a.height=b}},onChange:function(){var a=this,b=a.input.dom.value,c=a.el.getByTag("textarea"),d=b.match(/\n/g).length*a.lineHeight;d<a.minHeight?(d=a.minHeight,c.css({"overflow-y":"hidden"})):d>a.maxHeight?(d=a.maxHeight,c.css({"overflow-y":"scroll"})):(console.log("in 4"),c.css({"overflow-y":"hidden"})),a.height=d}}),Fancy.Class(["Fancy.form.field.CheckBox","Fancy.CheckBox"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.checkbox",constructor:function(){var a=this;a.Super("const",arguments)},init:function(){var a=this;a.addEvents("focus","blur","input","up","down","change","key"),a.Super("init",arguments),a.tpl=new Fancy.Template(a.tpl),a.render({labelWidth:a.labelWidth,labelDispay:a.labelText?"":"none",label:a.label}),a.acceptedValue=a.value,a.set(a.value),a.ons()},labelText:"",labelWidth:60,value:!1,checkedCls:"fancy-checkbox-on",cls:"fancy fancy-field fancy-field-checkbox",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">','<div class="fancy-field-checkbox-input" style=""></div>',"</div>",'<div class="fancy-field-input-label" style="inputLabelDisplay">',"{inputLabel}","</div>",'<div class="fancy-clearfix"></div>'],ons:function(){var a=this,b=a.el;b.on("click",a.onClick,a),b.on("mousedown",a.onMouseDown,a)},onClick:function(){var a=this,b=a.el,c=a.checkedCls;b.toggleClass(c),a.value=b.hasClass(c),a.fire("change",a.value)},onMouseDown:function(a){a.preventDefault()},set:function(a,b){var c=this,d=c.el,e=c.checkedCls;if(a===!0||1===a)d.addClass(e),a=!0;else{if(a!==!1&&0!==a)throw new Error("not right value for checkbox "+a);d.removeClass(e),a=!1}c.value=a,b!==!1&&c.fire("change",c.value)},setValue:function(a,b){this.set(a,b)},getValue:function(){var a=this;return a.value},get:function(){return this.getValue()},clear:function(){this.set(!1)}}),function(){var a={},b=function(b){for(var c in a)c!==b&&a[c].hideList()};Fancy.Class(["Fancy.form.field.Combo","Fancy.Combo"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.combo",constructor:function(){var a=this;a.Super("const",arguments)},init:function(){var b=this;b.addEvents("focus","blur","input","up","down","change","key"),b.Super("init",arguments),b.tpl=new Fancy.Template(b.tpl),b.render(),b.ons(),a[b.id]=b,b.hidden&&b.el.css("display","none"),b.style&&b.el.css(b.style)},cls:"fancy fancy-field fancy-combo",width:250,height:100,labelWidth:60,inputWidth:180,listRowHeight:25,emptyText:"",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-combo-text">','<table cellspacing="0" cellpadding="0">',"<tbody>","<tr>",'<td class="">','<input value="{value}" type="text" class="fancy-combo-input" readonly="true" style="{inputWidth} ">',"</td>",'<td class="fancy-combo-dropdown-button" style="width: 20px; ">&nbsp;</td>',"</tr>","</tbody>","</table>",'<div class="fancy-field-error" style="{errorTextStyle}"></div>',"</div>",'<div class="fancy-clearfix"></div>'],ons:function(){var a=this,c=a.el.getByTag("table"),d=a.listEl;a.input=a.el.getByTag("input"),a.onsList(),c.on("mousedown",function(a){a.preventDefault()}),c.on("click",function(c){var e=Fancy.get(c.currentTarget).parent(),f=e.$dom.offset(),g=[f.left,f.top+e.$dom.height()];"none"===d.css("display")?(d.css({display:"",left:g[0]+"px",top:g[1]+"px",width:e.css("width"),"z-index":2e3+Fancy.zIndex++}),b(a.id)):d.css("display","none")})},onsList:function(){var a,b=this,c=b.listEl,d=b.input,e=c.select("li");e.hover(function(b){a&&a.removeClass("fancy-combo-list-active"),Fancy.get(b.target).addClass("fancy-combo-list-active"),a=Fancy.get(b.target)}),e.on("click",function(a){var e=Fancy.get(a.target),f=e.attr("value");b.displayKey,d.dom.value=f,b.set(f),c.css("display","none"),b.onBlur()})},render:function(){var a=this,b=a.renderTo||document.body,c=document.createElement("div"),d=document.createElement("div"),e=a.value;if(void 0===e)e="";else{for(var f=0,g=a.data.length,h=!1;g>f;f++)if(a.data[f][a.valueKey]===e){a.valueIndex=f,e=a.data[f][a.displayKey],h=!0;break}h===!1&&(e="")}a.fire("beforerender"),c.className=a.cls;var i="",j="";a.labelWidth&&(i="width:"+a.labelWidth+"px;"),a.inputWidth&&(j="width:"+(a.inputWidth-20)+"px;");var k=a.labelWidth+8+10;"top"===a.labelAlign&&(k=8),"right"===a.labelAlign&&(k=8);var l=['<ul style="position: relative;">'];Fancy.each(a.data,function(b,c){var d="",e=b[a.displayKey];0===c&&(d="fancy-combo-list-active"),(""===e||" "===e)&&(e="&nbsp;"),l.push('<li value="'+b[a.valueKey]+'" class="'+d+'">'+e+"</li>")}),l.push("</ul>");var m=a.label;""===a.label?m="&nbsp;":void 0===a.label?m="&nbsp;":"right"!==a.labelAlign&&(m+=":"),c.innerHTML=a.tpl.getHTML({labelWidth:i,label:m,emptyText:a.emptyText,inputWidth:j,value:e,height:a.height}),a.el=b.appendChild(c),a.el=Fancy.get(a.el),d.className="fancy-combo-result-list",a.theme&&(d.className+=" fancy-theme-"+a.theme),d.innerHTML=l.join(""),$(d).css({display:"none",left:"0px",top:"0px",width:a.inputWidth+14}),a.data.length>9&&$(d).css({height:9*a.listRowHeight+"px",overflow:"auto"}),a.listEl=document.body.appendChild(d),a.listEl=Fancy.get(a.listEl),"top"===a.labelAlign?a.el.addClass("fancy-field-label-align-top"):"right"===a.labelAlign&&(a.el.addClass("fancy-field-label-align-right"),$(c).find(".fancy-field-label").insertAfter($(c).find(".fancy-combo-text"))),a.el.select(".fancy-combo-result-list").css("left",a.el.select(".fancy-combo-text").position().left+"px"),a.valueIndex&&(a.acceptedValue=a.value),a.fire("afterrender"),a.fire("render")},getValue:function(){var a=this;return-1===a.value||void 0===a.value?"":void 0!==a.valueKey?a.value:a.value},get:function(){return this.getValue()},set:function(a,b){for(var c=this,d="",e=0,f=c.data.length,g=!1;f>e;e++)if(c.data[e][c.valueKey]==a){c.valueIndex=e,d=c.data[e][c.displayKey],g=!0;break}g===!1&&(d=""),c.value=a,-1===a?c.input.dom.value="":c.input.dom.value=d,b!==!1&&c.onInput()},setValue:function(a,b){this.set(a,b)},setData:function(a){var b=this,c=[];b.data=a,Fancy.each(b.data,function(a,d){var e="",f=a[b.displayKey];0===d&&(e="fancy-combo-list-active"),(""===f||" "===f)&&(f="&nbsp;"),c.push('<li value="'+a[b.valueKey]+'" class="'+e+'">'+f+"</li>")}),Fancy.get(b.listEl.select("ul")[0]).update(c.join("")),b.onsList()},onInput:function(){var a=this,b=a.getValue();a.acceptedValue=a.get(),a.fire("change",b)},clear:function(){var a=this;a.set(-1,!1)},hideList:function(){var a=this,b=a.listEl;b.css("display","none")}})}(),Fancy.Class(["Fancy.form.field.Line","Fancy.FieldLine"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.line",constructor:function(a){var b=this,a=a||{};Fancy.apply(b,a),b.Super("const",arguments)},init:function(){var a=this;a.addEvents(),a.Super("init",arguments),a.tpl=new Fancy.Template(a.tpl);for(var b,c=0,d=a.items.length;d>c;c++){var e=a.items[c];e.style=e.style||{},"top"===e.labelAlign?b=!0:e.style["padding-top"]="0px",0===c&&(e.style["padding-left"]="0px")}a.render(),b&&a.el.css("height","48px")},cls:"fancy fancy-field fancy-field-line",value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-text fancy-field-line-items">',"</div>"]}),Fancy.Class(["Fancy.form.field.Set","Fancy.SetField"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.set",constructor:function(a){var b=this,a=a||{};Fancy.apply(b,a),b.Super("const",arguments)},init:function(){var a=this;a.addEvents("collapsed","expanded"),a.Super("init",arguments),a.tpl=new Fancy.Template(a.tpl);for(var b,c=0,d=a.items.length;d>c;c++){var e=a.items[c];"top"===e.labelAlign&&(b=!0,0===c&&(e.style={"padding-left":"0px"}))}a.render(),void 0!==a.checkbox&&a.initCheckBox(),a.on("collapsed",a.onCollapsed,a),a.on("expanded",a.onExpanded,a)},cls:"fancy fancy-field-set",value:"",width:100,emptyText:"",tpl:["<fieldset>","<legend>",'<div class="fancy-field-checkbox-input" style="float:left;margin-top: 4px;display: none;"></div>','<div class="fancy-field-set-label" style="float:left;">{label}</div>','<div class="fancy-clearfix"></div>',"</legend>",'<div class="fancy-field-text fancy-field-set-items">',"</div>","</fieldset>"],initCheckBox:function(){var a=this,b=Fancy.get(a.el.select(".fancy-field-checkbox-input")[0]);b.css("display",""),a.checkbox===!0&&a.el.addClass("fancy-checkbox-on");var c=a.el.select(".fancy-field-set-items");setTimeout(function(){a.checkbox===!0||a.fire("collapsed")},1),a.checkbox===!0?(c.css("display",""),a.el.removeClass("fancy-set-collapsed")):(c.css("display","none"),a.el.addClass("fancy-set-collapsed")),b.on("click",function(){a.el.toggleClass("fancy-checkbox-on");var b=a.el.hasClass("fancy-checkbox-on"),c=a.el.select(".fancy-field-set-items");b?(c.css("display",""),a.el.removeClass("fancy-set-collapsed"),a.fire("expanded")):(c.css("display","none"),a.el.addClass("fancy-set-collapsed"),a.fire("collapsed"))})},onCollapsed:function(){var a=this,b=a.form,c=a.el.select(".fancy-field-set-items"),d=parseInt(c.css("height"));b.setHeight(b.getHeight()-d)},onExpanded:function(){var a=this,b=a.form,c=a.el.select(".fancy-field-set-items"),d=parseInt(c.css("height"));b.setHeight(b.getHeight()+d)}}),Fancy.Class(["Fancy.form.field.Tab","Fancy.Tab"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.tab",constructor:function(a){var b=this,a=a||{};Fancy.apply(b,a),b.Super("const",arguments)},init:function(){var a=this;a.addEvents("collapsed","expanded"),a.Super("init",arguments),a.tpl=new Fancy.Template(a.tpl);for(var b,c=0,d=a.items.length;d>c;c++){var e=a.items[c];"top"===e.labelAlign&&(b=!0,0===c&&(e.style={"padding-left":"0px"}))}a.render()},cls:"fancy fancy-field-tab",value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-text fancy-field-tab-items">',"</div>"]}),Fancy.Class(["Fancy.form.field.HTML","Fancy.HTMLField"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.html",constructor:function(a){var b=this,a=a||{};Fancy.apply(b,a),b.Super("const",arguments)},init:function(){var a=this;a.addEvents("focus","blur","input","enter","up","down","change","key"),a.Super("init",arguments),a.tpl=new Fancy.Template(a.tpl),a.render(),a.hidden&&a.el.css("display","none"),a.style&&a.el.css(a.style)},cls:"fancy fancy-field-html",value:"",width:100,emptyText:"",tpl:['<div class="" style="">',"{value}","</div>"],render:function(){var a=this,b=a.renderTo||document.body,c=document.createElement("div");a.prepareValid(),a.fire("beforerender"),c.className=a.cls,c.innerHTML=a.tpl.getHTML({value:a.value,height:a.height}),a.el=b.appendChild(c),a.el=Fancy.get(a.el),a.acceptedValue=a.value,a.fire("afterrender"),a.fire("render")}}),Fancy.Class(["Fancy.form.field.Radio","Fancy.Radio"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.radio",constructor:function(){var a=this;a.Super("const",arguments)},init:function(){var a=this;a.addEvents("focus","blur","input","up","down","change","key"),a.Super("init",arguments),a.tpl=new Fancy.Template(a.tpl);var b="",c=a.items,d=0,e=c.length;for(a.column&&(a.cls+=" fancy-field-radio-column",b+='<div style="margin-left: '+(a.labelWidth+10)+'px;">');e>d;d++){var f=c[d],g="",h="fancy-field-text";a.column||0===d||(g="margin-left:10px;"),f.value===a.value&&(h+=" fancy-field-radio-on"),b+=['<div class="'+h+'" value='+f.value+">",'<div class="fancy-field-radio-input" style="float:left;'+g+'"></div>','<div style="float:left;margin:7px 0px 0px 0px;">'+f.text+"</div>","</div>"].join("")}a.column&&(b+="</div>"),a.itemsHTML=b,a.render(),a.acceptedValue=a.value,a.set(a.value),a.ons()},labelText:"",labelWidth:60,value:!1,checkedCls:"fancy-field-radio-on",cls:"fancy fancy-field fancy-field-radio",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}",'<div class="fancy-field-error" style="{errorTextStyle}"></div>',"</div>","{itemsHTML}",'<div class="fancy-clearfix"></div>'],ons:function(){var a=this,b=a.el;b.$dom.delegate(".fancy-field-text","click",function(){a.set(Fancy.get(this).attr("value"))}),b.on("mousedown",a.onMouseDown,a)},onClick:function(){var a=this,b=a.el,c=a.checkedCls;a.addClass(c),b.toggleClass(c),a.value=b.hasClass(c),a.fire("change",a.value)},onMouseDown:function(a){a.preventDefault()},set:function(a,b){var c=this,d=c.el,e=c.checkedCls,f=d.select(".fancy-field-text");f.removeClass(e),d.select("[value="+a+"]").addClass(e),c.value=a,b!==!1&&c.fire("change",c.value)},setValue:function(a,b){this.set(a,b)},getValue:function(){var a=this;return a.value},get:function(){return this.getValue()},clear:function(){this.set(!1)}}),Fancy.Class(["Fancy.form.field.ReCaptcha","Fancy.ReCaptcha"],{traits:{classes:[Fancy.form.field.Trait]},extend:Fancy.Widget,type:"field.recaptcha",constructor:function(a){var b=this,a=a||{};Fancy.apply(b,a),b.Super("const",arguments)},init:function(){var a=this;a.addEvents("focus","blur","input","enter","up","down","change","key"),a.Super("init",arguments),a.tpl=new Fancy.Template(a.tpl),a.render(),a.name="recaptcha",a.hidden&&a.el.css("display","none"),a.style&&a.el.css(a.style);var b=document.createElement("script");b.type="text/javascript",b.src="https://www.google.com/recaptcha/api.js",Fancy.get(document.head).append(b)},get:function(){var a=this,b=a.el.select("form");return a.value?a.value:(a.value="wait",b.one("submit",function(b){b.preventDefault(),a.value=$(this).serialize().replace("g-recaptcha-response=","")}),b.submit(),a.value)},cls:"fancy fancy-field",value:"",width:100,tpl:['<form action="post.php" method="POST">','<div class="g-recaptcha" data-sitekey="{key}"></div>',"</form>"]});